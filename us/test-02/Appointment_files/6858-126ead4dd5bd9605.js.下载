"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6858],{72814:function(n,t,e){e.d(t,{K:function(){return u}});var r=e(68697),o=e(171),u=function(n){return"string"==typeof n&&(0,r.Z)(n)&&4===(0,o.Z)(n)}},4290:function(n,t,e){var r,o;e.d(t,{o:function(){return r}}),(o=r||(r={})).Number="NUMBER",o.Text="TEXT"},55301:function(n,t,e){e.d(t,{M:function(){return u},f:function(){return o}}),(r=o||(o={})).Metadata="METADATA",r.InputField="INPUT_FIELD",r.HiddenField="HIDDEN_FIELD",r.CalculatedField="CALCULATED_FIELD";var r,o,u=function(n){return Object.values(o).includes(null==n?void 0:n.type)}},22504:function(n,t,e){var r,o,u,i,l,a,d,c,f,s,p,v;e.d(t,{CB:function(){return l},Km:function(){return a},Us:function(){return r},cX:function(){return u},wx:function(){return i}}),(d=r||(r={})).Insert="FormBuilder.Insert",d.Replace="FormBuilder.Replace",d.ReplaceAll="FormBuilder.ReplaceAll",d.Remove="FormBuilder.Remove",d.Move="FormBuilder.Move",d.CreateColumnList="FormBuilder.CreateColumnList",d.CreateColumn="FormBuilder.CreateColumn",d.AddToColumn="FormBuilder.AddToColumn",d.DetachFromColumn="FormBuilder.DetachFromColumn",d.UpdateColumnRatio="FormBuilder.UpdateColumnRatio",d.UpdateValue="FormBuilder.UpdateValue",d.UpdatePayload="FormBuilder.UpdatePayload",d.Refresh="FormBuilder.Refresh",d.RefreshAll="FormBuilder.RefreshAll",d.UpdateFormSettings="FormBuilder.UpdateFormSettings",d.OpenInsertBlockMenu="FormBuilder.OpenInsertBlockMenu",d.OpenBlockSettingsContextMenu="FormBuilder.OpenBlockSettingsContextMenu",d.OpenBlockActionsContextMenu="FormBuilder.OpenBlockActionsContextMenu",d.OpenTextFormatContextMenu="FormBuilder.OpenTextFormatContextMenu",d.OpenAuthMenu="FormBuilder.OpenAuthMenu",d.OpenTallyProMenu="FormBuilder.OpenTallyProMenu",d.OpenMentionMenu="FormBuilder.OpenMentionMenu",d.OpenMentionSettingsMenu="FormBuilder.OpenMentionSettingsMenu",d.InsertMention="FormBuilder.InsertMention",d.RemoveMention="FormBuilder.RemoveMention",d.UpdateMention="FormBuilder.UpdateMention",d.UpdateConditionals="FormBuilder.UpdateConditionals",d.UpdateConditionalActions="FormBuilder.UpdateConditionalAction",d.UpdateCalculatedFields="FormBuilder.UpdateCalculatedFields",d.UpdateHiddenFields="FormBuilder.UpdateHiddenFields",d.OpenCommandsMenu="FormBuilder.OpenCommandsMenu",d.OpenBulkInsertOptionsMenu="FormBuilder.OpenBulkInsertOptionsMenu",d.Undo="FormBuilder.Undo",d.Redo="FormBuilder.Redo",d.AddTitle="FormBuilder.AddTitle",(c=o||(o={})).Question="QUESTION",c.Field="FIELD",c.Layout="LAYOUT",(f=u||(u={})).Upload="UPLOAD",f.Link="LINK",f.Unsplash="UNSPLASH",f.Gallery="GALLERY",(s=i||(i={})).Start="START",s.End="END",s.Inherit="INHERIT",(p=l||(l={})).SignUp="SIGN_UP",p.Publish="PUBLISH",p.PaymentBlock="PAYMENT_BLOCK",p.TallyPro="TALLY_PRO",(v=a||(a={})).AddLink="ADD_LINK",v.ApplyLastTextColor="APPLY_LAST_TEXT_COLOR"},85205:function(n,t,e){var r,o,u,i,l,a,d,c,f,s;e.d(t,{Fn:function(){return r},LN:function(){return o},Us:function(){return l},mO:function(){return u},yR:function(){return i}}),(a=r||(r={})).And="AND",a.Or="OR",(d=o||(o={})).Addition="ADDITION",d.Subtraction="SUBTRACTION",d.Multiplication="MULTIPLICATION",d.Division="DIVISION",d.Assignment="ASSIGNMENT",(c=u||(u={})).Is="IS",c.IsNot="IS_NOT",c.IsAnyOf="IS_ANY_OF",c.IsEveryOf="IS_EVERY_OF",c.Contains="CONTAINS",c.DoesNotContain="DOES_NOT_CONTAIN",c.StartsWith="STARTS_WITH",c.DoesNotStartWith="DOES_NOT_START_WITH",c.EndsWith="ENDS_WITH",c.DoesNotEndWith="DOES_NOT_END_WITH",c.IsEmpty="IS_EMPTY",c.IsNotEmpty="IS_NOT_EMPTY",c.Equal="EQUAL",c.NotEqual="NOT_EQUAL",c.GreaterThan="GREATER_THAN",c.LessThan="LESS_THAN",c.GreaterOrEqualThan="GREATER_OR_EQUAL_THAN",c.LessOrEqualThan="LESS_OR_EQUAL_THAN",c.IsBefore="IS_BEFORE",c.IsAfter="IS_AFTER",(f=i||(i={})).Single="SINGLE",f.Group="GROUP",(s=l||(l={})).JumpToPage="JUMP_TO_PAGE",s.Calculate="CALCULATE",s.RequireAnswer="REQUIRE_ANSWER",s.ShowBlocks="SHOW_BLOCKS",s.HideBlocks="HIDE_BLOCKS",s.HideButtonToDisableCompletion="HIDE_BUTTON_TO_DISABLE_COMPLETION"},23936:function(n,t,e){e.d(t,{SL:function(){return f},Yq:function(){return v},_5:function(){return s},_L:function(){return d},_c:function(){return y},iu:function(){return p},sw:function(){return c}});var r=e(96026),o=e.n(r),u=e(32217),i=e(11242),l=e(22504),a=e(35066),d=function(n,t){return!!t&&!!t.isRequired&&(null==t?void 0:t.isRequired)&&(t.titleBlockUuid===n||!t.titleBlockUuid&&t.isRequiredBlockUuid===n)},c=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[],o=!1,u=!0,i=!1,l=void 0;try{for(var a,d=n[Symbol.iterator]();!(u=(a=d.next()).done);u=!0){var c=a.value;if(o||c.uuid===t)o=!0;else{r.push(c);continue}if(o&&e.includes(c.type)){r.push(c);continue}}}catch(n){i=!0,l=n}finally{try{u||null==d.return||d.return()}finally{if(i)throw l}}return r},f=function(n,t){if(!u.LQ.includes(n.type))return!1;var e=t.find(function(t){return t.groupUuid===n.blockGroupUuid});return!e||e.type!==i.kH.MultipleChoiceOption&&e.type!==i.kH.Dropdown||!e.payload.allowMultiple},s=function(n,t){return v(n)||i.kH.Matrix===n.type||(null==t?void 0:t.includeQuestions)&&u.$5.includes(n.type)},p=function(n,t,e){var r=[];return s(n,e)&&(r=o()((0,a.ob)(t.startBlockUuid)+1,(0,a.ob)(t.endBlockUuid)+1)),r},v=function(n){return n.payload.isFolded&&u.$5.includes(n.type)},y=function(n,t){return u.H.includes(n)&&[l.Us.CreateColumnList,l.Us.CreateColumn,l.Us.AddToColumn].includes(t)}},45889:function(n,t,e){e.d(t,{p:function(){return i},u:function(){return u}});var r=e(69020),o=e(63734),u=function(n,t){var e=t.find(function(t){return t.uuid===n});if(!e)return"";if("value"in e)return(0,o.CL)((0,o.Vt)(e.value));var u=e.payload.safeHTMLSchema;return(0,o.Vt)((0,r.Du)(u))},i=function(n){if(!n||0===n.length)return[];var t,e=n[0].payload;if(!e.randomize)return[];var r=null!==(t=e.lockInPlace)&&void 0!==t?t:[],o=[];return n.forEach(function(n){r.includes(n.uuid)?o.push(n.uuid):n.payload.isOtherOption&&o.push(n.uuid)}),o}},13471:function(n,t,e){e.d(t,{$Q:function(){return y},DM:function(){return d},UZ:function(){return p},V3:function(){return a},VY:function(){return c},X4:function(){return v},YB:function(){return s},YQ:function(){return g},fG:function(){return f},vE:function(){return l},xQ:function(){return h},yj:function(){return m}});var r=e(17621),o=e.n(r),u=e(17596),i={},l={red:u.B.redDark2,orange:u.B.orangeDark2,yellow:u.B.yellowDark2,green:u.B.greenDark2,blue:u.B.blueDark2,purple:u.B.purpleDark2,pink:u.B.pinkDark2,gray:u.B.text},a={gray:u.B.grayBackground,red:u.B.redLight2,orange:u.B.orangeLight2,yellow:u.B.yellowLight1,green:u.B.greenLight2,blue:u.B.blueLight2,purple:u.B.purpleLight2,pink:u.B.pinkLight2},d={gray:u.B.grayBackground,red:u.B.redLight1,orange:u.B.orangeLight1,yellow:u.B.yellowLight1,green:u.B.greenLight1,blue:u.B.blueLight1,purple:u.B.purpleLight1,pink:u.B.pinkLight1},c={gray:u.B.gray,red:u.B.red,orange:u.B.orange,yellow:u.B.yellowDark1,green:u.B.green,blue:u.B.blue,purple:u.B.purple,pink:u.B.pink},f=function(n,t){var e="".concat(n,"_").concat(t);if(i[e])return i[e];var r=o()(n).setAlpha(t).toRgbString();return i[e]=r,r},s=function(n){return"".concat(o()(n).setAlpha(.12).toRgbString(),"  0px 1px 1px 0px, ").concat(o()(n).setAlpha(.16).toRgbString()," 0px 0px 0px 1px, ").concat(o()(n).setAlpha(.08).toRgbString()," 0px 2px 5px 0px")},p=function(n){return"".concat(o()(n).setAlpha(.12).toRgbString()," 0px 1px 1px 0px, ").concat(o()(n).setAlpha(.16).toRgbString()," 0px 0px 0px 1px,").concat(o()(n).setAlpha(.08).toRgbString()," 0px 3px 9px 0px, ").concat(o()(n).setAlpha(.08).toRgbString()," 0px 2px 5px 0px")},v=function(n){return"".concat(n," 0px 0px 0px 2px, ").concat(o()(n).setAlpha(.16).toRgbString()," 0px 0px 0px 1px")},y=function(n){return"".concat(o()(n).setAlpha(.36).toRgbString()," 0px 0px 0px 4px, ").concat(o()(n).setAlpha(.16).toRgbString()," 0px 0px 0px 1px")},h=function(n){return"".concat(o()(n).setAlpha(.36).toRgbString()," 0px 0px 0px 4px, ").concat(n," 0px 0px 0px 2px")},m=function(n){var t=Object.keys(l);return t[n%t.length]},g=function(n,t){return!!n&&!!t&&o()(n).toHex()===o()(t).toHex()}},15487:function(n,t,e){e.d(t,{X:function(){return l},_:function(){return i}});var r,o=e(11010),u=e(10092),i=function(n){return new Promise(function(t){return setTimeout(t,n)})},l=(r=(0,o._)(function(n){var t,e,r,o=arguments;return(0,u.Jh)(this,function(u){switch(u.label){case 0:t=o.length>1&&void 0!==o[1]?o[1]:250,e=o.length>2&&void 0!==o[2]?o[2]:null,r=0,u.label=1;case 1:if(!(!n()&&(null===e||r<e)))return[3,3];return[4,i(t)];case 2:return u.sent(),r+=t,[3,1];case 3:return[2]}})}),function(n){return r.apply(this,arguments)})},35066:function(n,t,e){e.d(t,{A9:function(){return F},AU:function(){return M},C_:function(){return b},F7:function(){return O},FD:function(){return y},FF:function(){return N},Fz:function(){return T},KH:function(){return m},KS:function(){return p},M3:function(){return x},NJ:function(){return s},QO:function(){return H},Qe:function(){return C},Tp:function(){return k},Xm:function(){return _},ZD:function(){return h},bI:function(){return L},bc:function(){return D},cj:function(){return g},df:function(){return d},e7:function(){return K},gZ:function(){return E},ld:function(){return q},ly:function(){return v},mh:function(){return R},ob:function(){return S},qX:function(){return A},rh:function(){return w},uN:function(){return I},w3:function(){return P},xs:function(){return c},yG:function(){return a},zM:function(){return G}});var r=e(10928),o=e.n(r),u=e(11242),i=e(86661),l=e(9743),a=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.innerHTML=t,e&&n.focus()},d=function(n){return n.forEach(function(t,e){var r;t.nodeType===Node.ELEMENT_NODE&&(0===t.childNodes.length||(null===(r=t.textContent)||void 0===r?void 0:r.length)===0)&&n.item(e).remove(),t.nodeType===Node.ELEMENT_NODE&&t.childNodes.length>0&&d(t.childNodes)}),n},c=function(n){var t="";return n.forEach(function(n){t+=n.nodeType===Node.TEXT_NODE?n.textContent:n.outerHTML}),t},f=function(n){return Array.from(n.childNodes).filter(function(n){return!(n.nodeType===Node.TEXT_NODE&&""===n.textContent)})},s=function(n){for(var t=function(n){return f(n)[0]||null},e=t(n);e&&t(e);)e=t(e);return e},p=function(n){for(var t=function(n){return o()(f(n))||null},e=t(n);e&&t(e);)e=t(e);return e},v=function(n){var t,e;return n.nodeType===Node.ELEMENT_NODE?t=n.closest("[contenteditable]"):t=null===(e=n.parentElement)||void 0===e?void 0:e.closest("[contenteditable]"),(null==t?void 0:t.getAttribute("contenteditable"))==="true"},y=function(n){var t=n.nodeType===Node.ELEMENT_NODE?n:n.parentElement;if(!t)return null;for(var e=t.nextSibling,r=t.previousSibling,o=!0;o;){if(e&&v(e))return e;if(e&&(e=e.nextSibling),r&&v(r))return r;r&&(r=r.previousSibling),e||r||(o=!1)}return null},h=function(n,t){var e,r=document.elementFromPoint(n,t);if(!r)return null;var o=r.childNodes;if(0===o.length)return r;var u=r.querySelector(".content-editable-block");u&&(o=u.childNodes);for(var i=[],l=0;l<o.length;l++){var a=document.createRange();a.selectNode(o[l]);for(var d=a.getClientRects(),c=0;c<d.length;c++){var f=d[c];if(t===f.top&&i.push(o[l]),n>=f.left&&n<=f.right&&t>=f.top&&t<=f.bottom){e=o[l];break}}if(e)break}return!e&&i.length>0?i.pop():e||r},m=function(n,t,e){var r=n.parentElement&&"rtl"===getComputedStyle(n.parentElement).direction,o=!1,u=0;try{for(;!o;){var i=document.createRange();i.setStart(n,u);var a=(0,l.N7)(i),d=a.x,c=a.y;if(e===c&&(!r&&t<=d||r&&t>=d)){o=!0;continue}u++}}catch(n){u=u>0?u-1:0}return u},g=function(){return"undefined"==typeof document?[]:Array.from(document.querySelectorAll(".content-editable-block"))},k=function(n){return"undefined"==typeof document?null:document.getElementById(n)},b=function(n){var t;return null!==(t=g()[n])&&void 0!==t?t:null},N=function(n){var t=n-2,e=b(n),r=W(),o=r.findIndex(function(n){return n.dataset.blockUuid===(null==e?void 0:e.id)});if(-1===o){var u=Z(n);if(-1===(o=r.findIndex(function(n){return n.dataset.blockGroupUuid===u})))return t}var i=r[o-2];return i?t=S(i.dataset.blockUuid):t},x=function(n){var t=n+1,e=b(n),r=W(),o=r.findIndex(function(n){return n.dataset.blockUuid===(null==e?void 0:e.id)});if(-1===o){var u=Z(n);if(-1===(o=r.findIndex(function(n){return n.dataset.blockGroupUuid===u})))return t}var i=r[o+1];return i?t=S(i.dataset.blockUuid):t},T=function(n){var t,e;return null!==(e=null===(t=k(n))||void 0===t?void 0:t.innerHTML)&&void 0!==e?e:""},S=function(n){var t=k(n);return t?g().indexOf(t):-1},O=function(n){var t=b(n);if(!t)return null;var e=t.closest(".tally-block");if(!e)return null;var r=Array.from(e.classList).find(function(n){return -1!==n.indexOf("tally-block-")});return r?j(r):null},E=function(n){if(n.nodeType===Node.ELEMENT_NODE&&(null===(t=n.className)||void 0===t?void 0:t.indexOf("content-editable-block"))!==-1)return n;var t,e,r=n.parentElement;return r?r.nodeType===Node.ELEMENT_NODE&&(null===(e=r.className)||void 0===e?void 0:e.indexOf("content-editable-block"))!==-1?r:r.closest(".content-editable-block"):null},A=function(n){if(!n)return -1;if(n.className&&n.className.indexOf&&-1!==n.className.indexOf("content-editable-block"))return g().indexOf(n);var t=n.closest(".block-container");if(!t)return -1;var e=t.querySelector(".content-editable-block");return e?g().indexOf(e):-1},C=function(){return"undefined"!=typeof document&&document.activeElement&&-1!==document.activeElement.className.indexOf("content-editable-block")?document.activeElement:null},U=function(){if("undefined"==typeof document)return null;var n=document.querySelector(".tally-block:hover");return n?n.querySelector(".content-editable-block"):null},B=function(){var n=C();return n?n.getAttribute("id"):null},w=function(){var n=B();return n?T(n):""},_=function(){var n=C();return n?g().indexOf(n):-1},H=function(){var n=U();return n?g().indexOf(n):-1},M=function(n){var t=C();if(t){var e=(0,l.Ct)(),r=e.x,o=e.y;a(t,n);var u=h(r,o);if(u){var i=m(u,r,o);(0,l.KJ)(u,i)}}},F=function(n){for(var t=g().splice(0,n).reverse(),e=-1;t.length>0&&e<0;){var r=t.shift();n--,"true"===r.getAttribute("contenteditable")&&"false"===r.dataset.isFolded&&(e=n)}return e},L=function(n){for(var t=g().splice(n+1),e=-1;t.length>0&&e<0;){var r=t.shift();n++,"true"===r.getAttribute("contenteditable")&&"false"===r.dataset.isFolded&&(e=n)}return e},R=function(n){for(var t=g().splice(0,n).reverse(),e=-1;t.length>0&&e<0;){var r=t.shift();n--,"true"===r.dataset.isSelectable&&"false"===r.dataset.isFolded&&(e=n)}return e},I=function(n){for(var t=g().splice(n+1),e=-1;t.length>0&&e<0;){var r=t.shift();n++,"true"===r.dataset.isSelectable&&"false"===r.dataset.isFolded&&(e=n)}return e},D=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){if(e){if(a(e,n,t.focus),t.focus){var r=e.closest(".block-container");if(!r)return;var o=r.getBoundingClientRect(),u=o.top,i=o.bottom,d=o.height;u>=0&&i<=window.innerHeight-200||window.scrollTo(0,document.documentElement.scrollTop+d)}if(t.cursor){var c=h(t.cursor.x,t.cursor.y);c&&(0,l.KJ)(c,m(c,t.cursor.x,t.cursor.y))}}}},P=function(){return function(n){if(n){var t,e;null===(e=n.closest(".block-container"))||void 0===e||null===(t=e.querySelector(".add-container"))||void 0===t||t.click()}}},q=function(n){return function(t){t&&a(t,n)}},G=function(n,t){var e,r=n?k(n):C();if(!r)return{top:0,bottom:0,left:0,right:0};var o=r.closest(".block-container");if(!o)return{top:0,bottom:0,left:0,right:0};var u=null!==(e=o.querySelector(".".concat(t)))&&void 0!==e?e:o;return{top:u.getBoundingClientRect().bottom+5+(0,i.sw)(),bottom:window.innerHeight-u.getBoundingClientRect().top-(0,i.sw)()+5,left:u.getBoundingClientRect().left+window.pageXOffset,right:window.innerWidth-u.getBoundingClientRect().right-window.pageXOffset}},j=function(n){return n.replace("tally-block-","").replace(/-/g,"_").toUpperCase()},Z=function(n){var t=b(n);if(!t)return null;var e=t.closest(".tally-block");if(!e)return null;var r=Array.from(e.classList).find(function(n){return -1!==n.indexOf("tally-block-group-")});return r?r.replace("tally-block-group-",""):null},K=function(){return null!==document.querySelector(".tally-context-menu-overlay")},W=function(){return Array.from(document.querySelectorAll('.move-dropzone[data-style="block"]')).filter(function(n){return!1===[u.kH.MatrixColumn,u.kH.MatrixRow].includes(n.dataset.blockType)})}},20114:function(n,t,e){e.d(t,{In:function(){return v},VN:function(){return y},WW:function(){return p},cO:function(){return g},dV:function(){return m},m8:function(){return h}});var r=e(4586),o=e(8773),u=e(32217),i=e(11242),l=e(55301),a=e(85205),d=e(23936),c=e(63371),f=e(45889),s=e(63734),p=function(){return{uuid:(0,o.Z)()}},v=function(){return{uuid:(0,o.Z)()}},y=function(n,t){var e=[],o=[],a=(0,r._)(n);return(null==t?void 0:t.beforeBlockUuid)&&(n=(0,d.sw)(n,t.beforeBlockUuid,null==t?void 0:t.alwaysIncludeBlockTypes)),(null==t?void 0:t.filterOutBlockTypes)&&t.filterOutBlockTypes.length>0&&(n=n.filter(function(n){var e=n.type;return!1===t.filterOutBlockTypes.includes(e)})),(null==t?void 0:t.includeMetadata)&&(e.push({uuid:"id",type:l.f.Metadata,questionType:i.kH.FormTitle,blockGroupUuid:"id",title:"id"}),e.push({uuid:"respondentId",type:l.f.Metadata,questionType:i.kH.FormTitle,blockGroupUuid:"respondentId",title:"respondentId"}),e.push({uuid:"formName",type:l.f.Metadata,questionType:i.kH.FormTitle,blockGroupUuid:"formName",title:"formName"})),n.forEach(function(r){if(!o.includes(r.groupUuid)){if(r.type===i.kH.CalculatedFields)r.payload.calculatedFields.filter(function(n){return n.name&&n.type}).forEach(function(n){e.push({uuid:n.uuid,type:l.f.CalculatedField,questionType:i.kH.CalculatedFields,blockGroupUuid:r.groupUuid,title:n.name||"",calculatedFieldType:n.type})});else if(r.type===i.kH.HiddenFields)r.payload.hiddenFields.forEach(function(n){e.push({uuid:n.uuid,type:l.f.HiddenField,questionType:i.kH.HiddenFields,blockGroupUuid:r.groupUuid,title:n.name||""})});else if(r.type!==i.kH.Matrix||(null==t?void 0:t.combineMatrix)){var d=(0,c.Z9)(r,a);d&&e.push({uuid:d.blockGroupUuid,type:l.f.InputField,questionType:d.type,blockGroupUuid:d.blockGroupUuid,title:(0,s.CL)(d.title||"")})}else{var p=n.filter(function(n){return n.groupUuid===r.groupUuid&&n.type===i.kH.MatrixRow}),v=(0,c.Z9)(r,a);p.forEach(function(n){var t=(0,f.u)(n.uuid,a);v&&v.title&&v.title!==u.d4[i.kH.Matrix]&&(t="".concat(v.title," [").concat(t,"]")),e.push({uuid:n.uuid,type:l.f.InputField,questionType:i.kH.Matrix,blockGroupUuid:n.groupUuid,title:t})})}o.push(r.groupUuid)}}),e},h=function(n,t){var e=n.title;return n.type===l.f.Metadata&&(e=t("form-builder.mention-menu.metadata.".concat(n.uuid))),e},m=function(n,t,e){var r=!1,o=!0,u=!1,l=void 0;try{for(var d,c,f=(null!==(d=n.conditionals)&&void 0!==d?d:[])[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var s,p,v,y,h,g=c.value;if((null===(p=g.payload)||void 0===p?void 0:null===(s=p.field)||void 0===s?void 0:s.blockGroupUuid)&&e.includes(g.payload.field.blockGroupUuid)||(null===(y=g.payload)||void 0===y?void 0:null===(v=y.value)||void 0===v?void 0:v.blockGroupUuid)&&e.includes(g.payload.value.blockGroupUuid)||g.type===a.yR.Group&&(null===(h=g.payload)||void 0===h?void 0:h.conditionals)&&(r=m(g.payload,t,e)))return!0}}catch(n){u=!0,l=n}finally{try{o||null==f.return||f.return()}finally{if(u)throw l}}var k=!0,b=!1,N=void 0;try{for(var x,T,S=(null!==(x=n.actions)&&void 0!==x?x:[])[Symbol.iterator]();!(k=(T=S.next()).done);k=!0){var O,E,A,C,U,B,w,_,H,M,F,L=T.value;if((null===(O=L.payload)||void 0===O?void 0:O.requireAnswer)&&e.includes(L.payload.requireAnswer)||(null===(C=L.payload)||void 0===C?void 0:null===(A=C.calculate)||void 0===A?void 0:null===(E=A.field)||void 0===E?void 0:E.blockGroupUuid)&&e.includes(L.payload.calculate.field.blockGroupUuid))return!0;if((null===(w=L.payload)||void 0===w?void 0:null===(B=w.calculate)||void 0===B?void 0:null===(U=B.value)||void 0===U?void 0:U.blockGroupUuid)&&e.includes(L.payload.calculate.value.blockGroupUuid))return!0;if((null===(_=L.payload)||void 0===_?void 0:_.showBlocks)&&L.payload.showBlocks.some(function(n){return n===t.uuid}))return!0;else if((null===(H=L.payload)||void 0===H?void 0:H.hideBlocks)&&L.payload.hideBlocks.some(function(n){return n===t.uuid}))return!0;else if((null===(M=L.payload)||void 0===M?void 0:M.jumpToPage)===t.uuid||(null===(F=L.payload)||void 0===F?void 0:F.jumpToPage)&&t.type===i.kH.PageBreak)return!0}}catch(n){b=!0,N=n}finally{try{k||null==S.return||S.return()}finally{if(b)throw N}}return r},g=function(n,t){var e=!0,r=!1,o=void 0;try{for(var u,i=n.calculatedFields[Symbol.iterator]();!(e=(u=i.next()).done);e=!0){var l,a=u.value;if((null===(l=a.value)||void 0===l?void 0:l.blockGroupUuid)&&t.includes(a.value.blockGroupUuid))return!0}}catch(n){r=!0,o=n}finally{try{e||null==i.return||i.return()}finally{if(r)throw o}}return!1}},9743:function(n,t,e){e.d(t,{B4:function(){return b},Ct:function(){return s},G0:function(){return p},JA:function(){return k},KJ:function(){return u},N7:function(){return f},NZ:function(){return c},RN:function(){return m},ct:function(){return v},fI:function(){return d},iD:function(){return N},kL:function(){return h},lT:function(){return g},oR:function(){return i},sg:function(){return a},ut:function(){return l},yZ:function(){return y}});var r=e(22504),o=e(35066),u=function(n,t){try{var e=document.createRange();e.setStart(n,t);var r=window.getSelection();null==r||r.removeAllRanges(),null==r||r.addRange(e)}catch(n){}},i=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="",e=window.getSelection();try{if(e&&e.rangeCount>0&&e.focusNode){var r=e.getRangeAt(0).cloneRange();r.collapse(!0),r.setStart(e.focusNode,0);var o=r.toString();t=o.charAt(o.length-n)}}catch(n){}return t},l=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="",e=window.getSelection();try{if(e&&e.rangeCount>0&&e.focusNode){var r=e.getRangeAt(0).cloneRange();r.collapse(!0),r.setEnd(e.focusNode,e.focusOffset+n),t=r.toString().charAt(n-1)}}catch(n){}return t},a=function(){var n=window.getSelection();return n&&n.rangeCount&&n.focusNode?n.focusOffset:0},d=function(){var n=window.getSelection();return n&&n.rangeCount&&n.focusNode?n.focusNode:null},c=function(){var n=window.getSelection();return n&&n.rangeCount&&n.focusNode?[n.focusNode,n.focusOffset]:[null,0]},f=function(n){try{var t=n.getClientRects();if(n.collapsed&&n.startContainer&&n.startContainer.nodeType===Node.ELEMENT_NODE&&(0===n.startContainer.childNodes.length||0===t.length)){var e=n.startContainer,r="rtl"===getComputedStyle(e).direction,o=n.startContainer.getBoundingClientRect();return{x:r?o.right:o.x,y:o.y}}if(0===t.length)return{x:0,y:0};var u=t[0],i=u.x,l=u.y;return{x:i,y:l}}catch(n){return{x:0,y:0}}},s=function(){var n=window.getSelection();return n&&n.rangeCount&&n.focusNode?f(n.getRangeAt(0)):{x:0,y:0}},p=function(){var n=window.getSelection();return!!(n&&n.rangeCount&&n.focusNode&&(0,o.gZ)(n.focusNode))},v=function(){var n=window.getSelection();if(!n||!n.rangeCount||!n.focusNode||n.anchorOffset!==n.focusOffset)return!1;var t=(0,o.gZ)(n.focusNode);if(!t)return!1;if(n.focusNode===t&&0===n.focusOffset)return!0;var e=(0,o.NJ)(t);return!!(n.focusNode===e&&0===n.focusOffset||n.focusNode.nodeType===Node.ELEMENT_NODE&&n.focusNode.contains(e)&&0===n.focusOffset)},y=function(){var n,t=window.getSelection();if(!t||!t.rangeCount||!t.focusNode||t.anchorOffset!==t.focusOffset)return!1;var e=(0,o.gZ)(t.focusNode);if(!e)return!1;if(t.focusNode===e)return!0;var r=(0,o.KS)(e);return!!(t.focusNode===r&&t.focusOffset===(null===(n=t.focusNode.textContent)||void 0===n?void 0:n.length)||t.focusNode.nodeType===Node.ELEMENT_NODE&&t.focusNode.contains(r)&&t.focusOffset===t.focusNode.childNodes.length)},h=function(){var n=window.getSelection();if(!n||!n.rangeCount||!n.focusNode)return!1;var t=(0,o.gZ)(n.focusNode);if(!t)return!1;if(n.focusNode===t)return!0;var e=(0,o.NJ)(t);if(!e)return!0;var r=document.createRange();return r.setStart(e,0),s().y===f(r).y},m=function(){var n,t,e=window.getSelection();if(!e||!e.rangeCount||!e.focusNode)return!1;var r=(0,o.gZ)(e.focusNode);if(!r)return!1;if(e.focusNode===r)return!0;var u=(0,o.KS)(r);if(!u)return!0;var i=document.createRange();return i.setStart(u,null!==(t=null===(n=u.textContent)||void 0===n?void 0:n.length)&&void 0!==t?t:0),s().y===f(i).y},g=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.wx.Start,e=(0,o.C_)(n);if(e){if(t===r.wx.Start){e.focus();return}if(t===r.wx.End){var i,l,a=(0,o.KS)(e);if(!a){e.focus();return}u(a,null!==(l=null===(i=a.textContent)||void 0===i?void 0:i.length)&&void 0!==l?l:0);return}if(t===r.wx.Inherit){var d,c,p=n>(0,o.Xm)(),v=p?(0,o.NJ)(e):(0,o.KS)(e);if(!v){e.focus();return}var y=s().x,h=document.createRange();h.setStart(v,p?0:null!==(c=null===(d=v.textContent)||void 0===d?void 0:d.length)&&void 0!==c?c:0);var m=f(h).y,k=(0,o.ZD)(y,m);if(!k){e.focus();return}if(!1===e.contains(k)){g(n,r.wx.End);return}if(!1===(0,o.ly)(k)){var b=(0,o.FD)(k);if(b){u(b,0);return}u(e,1);return}var N=(0,o.KH)(k,y,m);u(k,N);return}}},k=function(){var n=window.getSelection();if(!n||!n.rangeCount||!n.focusNode)return["",""];var t=(0,o.gZ)(n.focusNode);if(!t)return["",""];var e=document.createRange();e.setStart(t,0),e.setEnd(n.focusNode,n.focusOffset);var r=(0,o.xs)((0,o.df)(e.cloneContents().childNodes)),u=document.createRange();return u.selectNodeContents(t),u.collapse(!1),u.setStart(n.focusNode,n.focusOffset),[r,(0,o.xs)((0,o.df)(u.cloneContents().childNodes))]},b=function(n,t){document.querySelectorAll(".mention").forEach(function(n){return n.setAttribute("contenteditable","true")}),document.execCommand(n,!1,t),document.querySelectorAll(".mention").forEach(function(n){return n.setAttribute("contenteditable","false")})},N=function(){var n,t,e,r={isBold:!1,isItalic:!1,isUnderline:!1,foreColor:"",backColor:"",link:void 0};document.queryCommandState&&(r.isBold=document.queryCommandState("bold"),r.isItalic=document.queryCommandState("italic"),r.isUnderline=document.queryCommandState("underline")),document.queryCommandValue&&(r.foreColor=document.queryCommandValue("foreColor"),r.backColor=document.queryCommandValue("backColor"));var o=window.getSelection();return o&&(r.link=null===(e=o.anchorNode)||void 0===e?void 0:null===(t=e.parentElement)||void 0===t?void 0:null===(n=t.closest("a"))||void 0===n?void 0:n.href),r}},43024:function(n,t,e){e.d(t,{UU:function(){return m},tK:function(){return b},x8:function(){return g},xb:function(){return k}});var r=e(72253),o=e(14932),u=e(4586),i=e(69983),l=e.n(i),a=e(44908),d=e.n(a),c=e(32217),f=e(11242),s=e(45889),p=e(13471),v=e(38582),y=e(69020),h=e(63734),m=function(n){var t=[],e=[];return n.forEach(function(u){var i,l,a=u.type,d=u.groupUuid,s=u.groupType;c.$v.includes(a)?(e.push(d),t.push((0,o._)((0,r._)({},u),{payload:(0,o._)((0,r._)({},u.payload),{html:(0,y.Du)(u.payload.safeHTMLSchema,!0)})}))):s===f.kH.Dropdown||s===f.kH.MultiSelect?!1===e.includes(d)&&(e.push(d),t.push((0,o._)((0,r._)({},u),{uuid:u.groupUuid,type:u.groupType,payload:(0,o._)((0,r._)({},u.payload),{placeholder:u.payload.placeholder?(0,h.CL)(u.payload.placeholder):null,options:n.filter(function(n){return n.groupUuid===d}).map(function(n){var t,e,r;return{value:n.uuid,text:n.payload.text?(0,h.CL)(n.payload.text):"",image:null!==(t=n.payload.image)&&void 0!==t?t:null,color:null!==(e=n.payload.color)&&void 0!==e?e:(0,p.yj)(n.payload.index),isOtherOption:null!==(r=n.payload.isOtherOption)&&void 0!==r&&r}})})}))):([f.kH.MultipleChoice,f.kH.Checkboxes,f.kH.Ranking].includes(s)?(null==u?void 0:null===(i=u.payload)||void 0===i?void 0:i.text)&&(u.payload.text=(0,h.CL)(u.payload.text)):(null==u?void 0:null===(l=u.payload)||void 0===l?void 0:l.placeholder)&&(u.payload.placeholder=(0,h.CL)(u.payload.placeholder)),e.push(d),t.push(u))}),t},g=function(n){var t=[],e=[];return n.forEach(function(n){n.type!==f.kH.PageBreak?e.push(n):(t.push(e),e=[])}),e.length>0&&t.push(e),t},k=function(n){var t=d()(n.filter(function(n){var t=n.groupType,e=n.payload,r=n.type;return e.randomize&&c.FW.includes(t)||e.randomizeRows&&r===f.kH.MatrixRow}).map(function(n){return n.groupUuid})),e=(0,u._)(n);return t.forEach(function(t){var u=[],i=[];if(n.forEach(function(n,e){n.groupUuid===t&&n.type!==f.kH.Matrix&&n.type!==f.kH.MatrixColumn&&(u.push(n),i.push(e))}),0!==u.length){var a=[],d=(0,s.p)(u);if(d.length>0){var c=[],p=[];u.forEach(function(n,t){d.includes(n.uuid)&&(c.push(n),p.push(t))}),u=u.filter(function(n){return!d.includes(n.uuid)}),a=l()(u),p.forEach(function(n,t){a.splice(n,0,c[t])})}else a=l()(u);i.forEach(function(n,t){var u=e[n].payload,l=u.columnUuid,d=u.columnListUuid,c=u.columnRatio;e[n]=(0,o._)((0,r._)({},a[t]),{payload:(0,o._)((0,r._)({},a[t].payload),{index:t,isFirst:0===t,isLast:t===i.length-1})}),l&&(e[n].payload.columnUuid=l,e[n].payload.columnListUuid=d,e[n].payload.columnRatio=c)})}}),e},b=function(n,t){var e=d()(n.filter(function(n){return n.groupType===f.kH.Ranking}).map(function(n){return n.groupUuid}));if(0===e.length)return n;var i=(0,u._)(n);return e.forEach(function(e){if(!(0,v.xb)(t[e])){var u=[],l=[];n.forEach(function(n,t){n.groupUuid===e&&(u.push(n),l.push(t))}),l.forEach(function(n,a){var d=void 0,c=t[e][a];if(void 0!==c&&(d=u.find(function(n){return n.uuid===c}),u=u.filter(function(n){return n.uuid!==c})),d||(d=u.shift()),d){var f=i[n].payload,s=f.columnListUuid,p=f.columnUuid,v=f.columnRatio;i[n]=(0,o._)((0,r._)({},d),{payload:(0,o._)((0,r._)({},d.payload),{index:a,isFirst:0===a,isLast:a===l.length-1})}),p&&(i[n].payload.columnUuid=p,i[n].payload.columnListUuid=s,i[n].payload.columnRatio=v)}})}}),i}},90347:function(n,t,e){e.d(t,{d:function(){return p},l:function(){return s}});var r=e(75766),o=e(72253),u=e(14932),i=e(44431),l=e(11242),a=e(4290),d=e(85205),c=e(96381),f=e(9420),s=function(n,t,e){return((null==e?void 0:e.onlySpecificBlockUuids)?t.filter(function(n){var t;return null===(t=e.onlySpecificBlockUuids)||void 0===t?void 0:t.includes(n.uuid)}):t).filter(function(n){return n.type===l.kH.CalculatedFields}).forEach(function(e){var r=e.groupUuid;e.payload.calculatedFields.forEach(function(e){void 0!==e.value&&(void 0===n[r]&&(n[r]={}),n[r][e.uuid]=(0,c.Jc)(e.value,e.type,n,t))})}),n},p=function(n,t,e,p){if(0===p.filter(function(n){return n.type===l.kH.CalculatedFields}).length||(n=s(n,p),0===p.filter(function(n){return n.type===l.kH.ConditionalLogic}).length))return n;var v=!0,y=!1,h=void 0;try{for(var m,g=t[Symbol.iterator]();!(v=(m=g.next()).done);v=!0){var k=m.value,b=(null!==(S=e[k-1])&&void 0!==S?S:[]).filter(function(n){return[l.kH.CalculatedFields,l.kH.ConditionalLogic].includes(n.type)}),N=!0,x=!1,T=void 0;try{for(var S,O,E=b[Symbol.iterator]();!(N=(O=E.next()).done);N=!0){var A=O.value;if(A.type===l.kH.CalculatedFields&&(n=s(n,p,{onlySpecificBlockUuids:[A.uuid]})),A.type===l.kH.ConditionalLogic){var C=A.payload,U=C.logicalOperator,B=C.conditionals,w=C.actions;if((0,f.VX)(B,U,n,p)){var _=!0,H=!1,M=void 0;try{for(var F,L=w[Symbol.iterator]();!(_=(F=L.next()).done);_=!0){var R,I,D,P,q,G,j=F.value;if(j.type===d.Us.Calculate&&(null===(I=j.payload)||void 0===I?void 0:null===(R=I.calculate)||void 0===R?void 0:R.field)&&(null===(P=j.payload)||void 0===P?void 0:null===(D=P.calculate)||void 0===D?void 0:D.operator)&&void 0!==(null===(G=j.payload)||void 0===G?void 0:null===(q=G.calculate)||void 0===q?void 0:q.value)){var Z=(0,c.zp)(n,j.payload.calculate.field),K=(0,c.Jc)(j.payload.calculate.value,j.payload.calculate.field.calculatedFieldType,n,p);switch(j.payload.calculate.field.calculatedFieldType===a.o.Number&&(Z=new i.BigNumber(Z),K=new i.BigNumber(K)),j.payload.calculate.operator){case d.LN.Addition:"object"==typeof Z?Z=Z.plus(K):Z+=K;break;case d.LN.Subtraction:Z=Z.minus(K);break;case d.LN.Multiplication:Z=Z.multipliedBy(K);break;case d.LN.Division:Z=Z.dividedBy(K);break;case d.LN.Assignment:Z=K}j.payload.calculate.field.calculatedFieldType===a.o.Number&&(Z=Z.toNumber()),n=(0,u._)((0,o._)({},n),(0,r._)({},j.payload.calculate.field.blockGroupUuid,(0,u._)((0,o._)({},n[j.payload.calculate.field.blockGroupUuid]),(0,r._)({},j.payload.calculate.field.uuid,Z))))}}}catch(n){H=!0,M=n}finally{try{_||null==L.return||L.return()}finally{if(H)throw M}}}}}}catch(n){x=!0,T=n}finally{try{N||null==E.return||E.return()}finally{if(x)throw T}}}}catch(n){y=!0,h=n}finally{try{v||null==g.return||g.return()}finally{if(y)throw h}}return n}},96381:function(n,t,e){e.d(t,{C7:function(){return K},Ee:function(){return B},J0:function(){return W},Jc:function(){return F},KN:function(){return I},MZ:function(){return V},Md:function(){return G},O2:function(){return Z},O6:function(){return q},Sz:function(){return Q},Tp:function(){return Y},X1:function(){return z},_j:function(){return nt},bZ:function(){return j},bm:function(){return D},iM:function(){return _},lL:function(){return P},lo:function(){return M},mh:function(){return $},sy:function(){return L},wm:function(){return nn},zj:function(){return R},zp:function(){return H}});var r=e(75766),o=e(72253),u=e(14932),i=e(5064),l=e(95027),a=e(34220),d=e(42404),c=e.n(d),f=e(8773),s=e(32217),p=e(11242),v=e(4290),y=e(55301),h=e(85205),m=e(23936),g=e(63371),k=e(45889),b=e(18277),N=e(20114),x=e(43024),T=e(90347),S=e(9420),O=e(38582),E=e(77782),A=e(18575),C=e(17415),U=e(72814),B=function(n,t,e,r,o){if(void 0===t)return"";if(s.FW.includes(n))return w(n,t,e,r);if(n===p.kH.InputDate){var u=(0,a.Z)(t);return(0,l.Z)(u)?o?(0,i.Z)(u,o.f,{locale:o.locale}):(0,i.Z)(u,"MMMM d, yyyy"):""}if(n===p.kH.InputNumber){var d,c,f,v,y=e.find(function(n){return n.groupUuid===r});return(0,E.uf)(t,{decimalSeparator:null==y?void 0:null===(d=y.payload)||void 0===d?void 0:d.decimalSeparator,thousandsSeparator:null==y?void 0:null===(c=y.payload)||void 0===c?void 0:c.thousandsSeparator,prefix:null==y?void 0:null===(f=y.payload)||void 0===f?void 0:f.prefix,suffix:null==y?void 0:null===(v=y.payload)||void 0===v?void 0:v.suffix})}return t},w=function(n,t,e,r){if(!t)return"";if(n===p.kH.Checkboxes||n===p.kH.MultiSelect){var o=e.filter(function(n){return t.includes(n.uuid)}).map(function(n){return n.payload.text}),u=t.find(function(n){return!1===(0,U.K)(n)});return void 0!==u&&o.push(u),o.join(", ")}if(n===p.kH.Ranking)return t.map(function(n){var t,r;return null!==(r=null===(t=e.find(function(t){return t.uuid===n}))||void 0===t?void 0:t.payload.text)&&void 0!==r?r:""}).join(", ");if([p.kH.MultipleChoice,p.kH.Dropdown].includes(n)){if(Array.isArray(t)){var i,l,a=e.filter(function(n){return t.includes(n.uuid)}).map(function(n){return n.payload.text}),d=t.find(function(n){return!1===(0,U.K)(n)});return void 0!==d&&a.push(d),a.join(", ")}return"string"==typeof t&&!1===(0,U.K)(t)?t:null!==(l=null===(i=e.find(function(n){return n.uuid===t}))||void 0===i?void 0:i.payload.text)&&void 0!==l?l:""}if(n===p.kH.Matrix){var c=[];if(c=r?t[r]:t)return c.map(function(n){return(0,k.u)(n,e)}).join(", ")}return t},_=function(n,t,e,r){if("string"==typeof e){if(t===p.kH.Checkboxes||t===p.kH.Ranking||t===p.kH.MultiSelect){var o=r.filter(function(t){return t.groupUuid===n&&t.payload.text===e}).map(function(n){return n.uuid});return o.length>0?o:e.includes(",")?(e.split(/,\s?/).forEach(function(t){var e=r.find(function(e){return e.groupUuid===n&&e.payload.text===t});e&&o.push(e.uuid)}),o.length>0?o:void 0):void 0}if([p.kH.MultipleChoice,p.kH.Dropdown].includes(t)){var u,i=r.find(function(t){return t.groupUuid===n});if((null==i?void 0:i.payload.allowMultiple)&&e.includes(",")){var l=[];return e.split(/,\s?/).forEach(function(t){var e=r.find(function(e){return e.groupUuid===n&&e.payload.text===t});e&&l.push(e.uuid)}),l.length>0?l:void 0}var a=null===(u=r.find(function(t){return t.groupUuid===n&&t.payload.text===e}))||void 0===u?void 0:u.uuid;return a?[a]:void 0}}},H=function(n,t){return t.uuid===t.blockGroupUuid?n[t.uuid]:n[t.blockGroupUuid]?n[t.blockGroupUuid][t.uuid]:""},M=function(n,t,e){var r=H(n,t);return s.FW.includes(t.questionType)&&(r=w(t.questionType,r,e)),r},F=function(n,t,e,r){return(0,y.M)(n)&&(n=M(e,n,r)),t!==v.o.Number||isNaN(parseFloat(n))||(n=parseFloat(n)),n},L=function(n,t){var e={},r=n.indexOf("?");new URLSearchParams(-1!==r?n.slice(r):"").forEach(function(n,t){e[t]=n});var o={};return t.filter(function(n){return n.type===p.kH.HiddenFields}).forEach(function(n){var t=n.groupUuid;n.payload.hiddenFields.forEach(function(n){(null==n?void 0:n.name)&&void 0!==e[n.name]&&(void 0===o[t]&&(o[t]={}),o[t][n.uuid]=e[n.name])})}),o},R=function(n,t,e,i){var l=(0,T.d)(n,t,e,i),a=i.filter(function(n){return n.type===p.kH.CalculatedFields});return 0===a.length?{}:a.reduce(function(n,t){var e=l[t.groupUuid];return e?(0,u._)((0,o._)({},n),(0,r._)({},t.groupUuid,e)):n},{})},I=function(n,t){var e=(0,C.wf)("FORM_DATA_".concat(n));if(!e)return{};var r=JSON.parse(e),o=Object.keys(r),u=!0,i=!1,l=void 0;try{for(var a,d=o[Symbol.iterator]();!(u=(a=d.next()).done);u=!0)!function(){var n=a.value,e=t.find(function(t){return t.groupUuid===n});if(e&&s.FW.includes(e.groupType)){var o=r[n];if(!(0,O.xb)(o)){var u=t.filter(function(t){return t.groupUuid===n});if(e.groupType===p.kH.Matrix){var i=function(t){if(!u.find(function(n){return n.uuid===t}))return delete r[n][t],"continue";var e=o[t],i=!0,l=!1,a=void 0;try{for(var d,c=e[Symbol.iterator]();!(i=(d=c.next()).done);i=!0)!function(){var e=d.value;u.find(function(n){return n.uuid===e})||(r[n][t]=r[n][t].filter(function(n){return n!==e}))}()}catch(n){l=!0,a=n}finally{try{i||null==c.return||c.return()}finally{if(l)throw a}}};for(var l in o)i(l)}else if(Array.isArray(o)){var d=!0,c=!1,f=void 0;try{for(var v,y=o[Symbol.iterator]();!(d=(v=y.next()).done);d=!0)!function(){var t=v.value,e=u.find(function(n){return n.uuid===t});!e&&!1===(0,U.K)(t)&&u.length>0&&u[0].payload.hasOtherOption&&(e=u[0]),e||(r[n]=r[n].filter(function(n){return n!==t}))}()}catch(n){c=!0,f=n}finally{try{d||null==y.return||y.return()}finally{if(c)throw f}}}else{var h=u.find(function(n){return n.uuid===o});!h&&!1===(0,U.K)(o)&&u.length>0&&u[0].payload.hasOtherOption&&(h=u[0]),h||delete r[n]}}}}()}catch(n){i=!0,l=n}finally{try{u||null==d.return||d.return()}finally{if(i)throw l}}return r},D=function(n,t){(0,C._4)("FORM_DATA_".concat(n),JSON.stringify(t))},P=function(n){(0,C.Tn)("FORM_DATA_".concat(n))},q=function(n){var t="FORM_SESSION_".concat(n),e=(0,C.wf)(t);if(e)return e;var r=(0,f.Z)();return(0,C._4)(t,r),r},G=function(n){(0,C.Tn)("FORM_SESSION_".concat(n))},j=function(n){var t="RESPONDENT",e={},r=(0,C.wf)(t);return r&&(e=JSON.parse(r))&&e[n]||(e[n]=(0,f.Z)(),(0,C._4)(t,JSON.stringify(e))),e[n]},Z=function(n,t){return 1===n?t[0]:t.filter(function(n){return n.type===p.kH.PageBreak})[n-2]},K=function(n,t){var e=t.slice(0,n).reverse().filter(function(n){return n.type===p.kH.PageBreak})[0];return null!=e?e:t[0]},W=function(n,t){var e=t.filter(function(n){var t=n.type;return[p.kH.FormTitle,p.kH.PageBreak].includes(t)}).findIndex(function(t){return t.uuid===n});return -1===e?null:e+1},V=function(n){var t=!1;return n.filter(function(n){return n.type===p.kH.PageBreak}).forEach(function(n){var e=n.payload;(null==e?void 0:e.isThankYouPage)&&(t=!0)}),t},J=function(n){var t=[];return n.forEach(function(n){n.forEach(function(n){var e=n.payload;t.push((null==e?void 0:e.html)||(null==e?void 0:e.placeholder)||"")})}),/password|pa{0,3}s[s|\\*]{0,2}w[0|o|\\*]{0,3}r{0,1}d|pass\sword|pass\*{1,3}w[o]{0,1}rd|jelszó|пароль|kata[\s|-]{0,2}sandi|sandi anda|contrase[ñ|n][y]{0,1}a|senh[a|ä|á]|Passwort|wachtwoord|Passwört|Şifre|m[o|ö]t[s]{0,1} de passe/i.test(t.join(" "))},X=function(n,t,e){var r=n.filter(function(n){return n.type===p.kH.ConditionalLogic});if(0===r.length)return!1;var o=!0,u=!1,i=void 0;try{for(var l,a=r[Symbol.iterator]();!(o=(l=a.next()).done);o=!0){var d=l.value.payload,c=d.logicalOperator,f=d.conditionals,s=d.actions,v=!0,y=!1,m=void 0;try{for(var g,k=s[Symbol.iterator]();!(v=(g=k.next()).done);v=!0)if(g.value.type===h.Us.HideButtonToDisableCompletion&&(0,S.VX)(f,c,t,e))return!0}catch(n){y=!0,m=n}finally{try{v||null==k.return||k.return()}finally{if(y)throw m}}}}catch(n){u=!0,i=n}finally{try{o||null==a.return||a.return()}finally{if(u)throw i}}return!1},Y=function(n,t,e,r,o,u){var i,l,a,d,c,f,s,v,y,h,k,b=null===(l=e[0])||void 0===l?void 0:null===(i=l.payload)||void 0===i?void 0:i.logo,N=null===(d=e[0])||void 0===d?void 0:null===(a=d.payload)||void 0===a?void 0:a.cover,T=null===(f=e[0])||void 0===f?void 0:null===(c=f.payload)||void 0===c?void 0:c.coverSettings,E=t.length,A=null!==(k=t[n-1])&&void 0!==k?k:[];A=(0,S.dp)(A,e,o,u),A=(0,x.tK)(A,o);var C=(0,S.KZ)(n,A,E,e,o),U=Z(n,e),B=!!(null==U?void 0:null===(s=U.payload)||void 0===s?void 0:s.isThankYouPage),w=C?Z(C,e):void 0,_=null===C||(null==w?void 0:null===(v=w.payload)||void 0===v?void 0:v.isThankYouPage),H=!B&&!X(A,o,e),M=Array.from((0,g.jZ)(A).values()).filter(function(n){return!1===[p.kH.HiddenFields,p.kH.CalculatedFields].includes(n.type)}),F=!!(null==r?void 0:r.pageAutoJump)&&H&&!_&&1===M.length&&(0,m.SL)(M[0],A),L=M.every(function(n){return void 0!==o[n.blockGroupUuid]&&!1===(0,O.xb)(o[n.blockGroupUuid])});return{logo:b,cover:N,coverSettings:T,pageBlocks:A,pageQuestions:M,nextPage:C,isCustomThankYouPage:B,isLastInputPage:_,canAutoJumpToNextPage:F,pageFilledIn:L,showSubmitButton:H,showBackButton:!B&&1!==n,buttonLabel:null==U?void 0:null===(h=U.payload)||void 0===h?void 0:null===(y=h.button)||void 0===y?void 0:y.label,showMaliciousFormWarning:J(t)}},z=function(n,t,e,r,o,u){try{var i=[],l=(0,N.VN)((0,x.UU)(o)),a=!0,d=!1,c=void 0;try{for(var f,s=l[Symbol.iterator]();!(a=(f=s.next()).done);a=!0){var p=f.value,v=p.uuid,y=p.title,h=p.questionType;i.push({id:v,title:y,type:h,answer:{value:M(u,p,o),raw:H(u,p)}})}}catch(n){d=!0,c=n}finally{try{a||null==s.return||s.return()}finally{if(d)throw c}}return{id:n,formId:e,formName:r,respondentId:t,createdAt:new Date,fields:i}}catch(n){return(0,A.Tb)(n),{}}},Q=function(){setTimeout(function(){var n,t,e=null===(n=document.forms[0])||void 0===n?void 0:n.elements[0];e&&(0,b.PZ)(e)&&("INPUT"===e.tagName&&!1===["radio","checkbox"].includes(null!==(t=e.getAttribute("type"))&&void 0!==t?t:"")||"TEXTAREA"===e.tagName)&&e.focus()},100)},$=function(){setTimeout(function(){var n=document.querySelector('[aria-invalid="true"]');if(n){n.focus(),!1===(0,b.PZ)(n)&&n.scrollIntoView({behavior:"smooth",block:"center"});return}var t=document.querySelector(".tally-validation-error");t&&!1===(0,b.PZ)(t)&&t.scrollIntoView({behavior:"smooth",block:"center"})},100)},nn=function(){return c()("ABCDEFGHIJKLMNPQRSTUVWXYZabcdefghijklmnpqrstuvwxyz123456789".split(""),6).join("")},nt=function(n,t,e,r){var o={},u=!0,i=!1,l=void 0;try{for(var a,d=n[Symbol.iterator]();!(u=(a=d.next()).done);u=!0)!function(){var n=a.value;if(n<e)return o[n]=100;if(n>e)return o[n]=0;var u=[],i=!0,l=!1,d=void 0;try{for(var c,f=r[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var v=c.value,y=v.type,h=v.groupUuid,m=v.payload;!1===s.z8.includes(y)||[p.kH.HiddenFields,p.kH.CalculatedFields].includes(y)||!m.isRequired||u.includes(h)||u.push(h)}}catch(n){l=!0,d=n}finally{try{i||null==f.return||f.return()}finally{if(l)throw d}}if(0===u.length)return o[n]=e<n?0:100;var g=u.length,k=0;u.forEach(function(n){!(0,O.xb)(t[n])&&k++}),o[n]=e<n?0:k/g*100}()}catch(n){i=!0,l=n}finally{try{u||null==d.return||d.return()}finally{if(i)throw l}}return o}},9420:function(n,t,e){e.d(t,{Ai:function(){return x},KZ:function(){return N},VX:function(){return k},dp:function(){return b}});var r=e(75766),o=e(72253),u=e(14932),i=e(4586),l=e(3522),a=e.n(l),d=e(18446),c=e.n(d),f=e(32217),s=e(11242),p=e(55301),v=e(85205),y=e(96381),h=e(18575),m=e(72814),g=function(n,t,e){var r=n.type,o=n.payload;if(r===v.yR.Group&&(null==o?void 0:o.conditionals)&&o.logicalOperator)return k(o.conditionals,o.logicalOperator,t,e);if(r===v.yR.Single&&(null==o?void 0:o.field)&&(null==o?void 0:o.comparison)){var u=o.field,i=o.comparison,l=o.value,d=(0,y.zp)(t,u);(0,p.M)(l)&&(l=(0,y.zp)(t,l));try{switch(i){case v.mO.Is:if(u.questionType===s.kH.Matrix)return Array.isArray(l)||(l=[l]),void 0!==d&&c()(d,l);if(Array.isArray(d))return 1===d.length&&T(d[0],l,e);return void 0!==d&&T(d,l,e);case v.mO.IsNot:if(u.questionType===s.kH.Matrix)return Array.isArray(l)||(l=[l]),void 0!==d&&!c()(d,l);if(Array.isArray(d))return 1!==d.length||!1===T(d[0],l,e);return void 0!==d&&!1===T(d,l,e);case v.mO.IsAnyOf:if(!Array.isArray(l)||!Array.isArray(d))return T(d,l,e);return l.some(function(n){return d.some(function(t){return T(t,n,e)})});case v.mO.IsEveryOf:if(!Array.isArray(l)||!Array.isArray(d))return T(d,l,e);return l.every(function(n){return d.some(function(t){return T(t,n,e)})});case v.mO.Contains:if(Array.isArray(d))return void 0!==l&&d.some(function(n){return T(n,l,e)});return void 0!==d&&void 0!==l&&RegExp(a()(l),"i").test(d);case v.mO.DoesNotContain:if(Array.isArray(d))return void 0!==l&&!1===d.some(function(n){return T(n,l,e)});return void 0!==d&&void 0!==l&&!1===RegExp(a()(l),"i").test(d);case v.mO.StartsWith:return void 0!==d&&void 0!==l&&RegExp("^".concat(a()(l)),"i").test(d);case v.mO.DoesNotStartWith:return void 0!==d&&void 0!==l&&!1===RegExp("^".concat(a()(l)),"i").test(d);case v.mO.EndsWith:return void 0!==d&&void 0!==l&&RegExp("".concat(a()(l),"$"),"i").test(d);case v.mO.DoesNotEndWith:return void 0!==d&&void 0!==l&&!1===RegExp("".concat(a()(l),"$"),"i").test(d);case v.mO.IsEmpty:if(Array.isArray(d))return 0===d.length;return void 0===d||""===d;case v.mO.IsNotEmpty:if(Array.isArray(d))return d.length>0;return void 0!==d&&""!==d;case v.mO.Equal:return Number(d)===Number(l);case v.mO.NotEqual:return Number(d)!==Number(l);case v.mO.GreaterThan:return Number(d)>Number(l);case v.mO.LessThan:return Number(d)<Number(l);case v.mO.GreaterOrEqualThan:return Number(d)>=Number(l);case v.mO.LessOrEqualThan:return Number(d)<=Number(l);case v.mO.IsBefore:if(/^[0-9]{2}:[0-9]{2}$/.test(d))return Date.parse("01/01/2000 ".concat(d))<Date.parse("01/01/2000 ".concat(l));return Date.parse(d)<Date.parse(l);case v.mO.IsAfter:if(/^[0-9]{2}:[0-9]{2}$/.test(d))return Date.parse("01/01/2000 ".concat(d))>Date.parse("01/01/2000 ".concat(l));return Date.parse(d)>Date.parse(l)}}catch(n){(0,h.Tb)(n)}}return!1},k=function(n,t,e,r){var o=n.map(function(n){return g(n,e,r)});return t===v.Fn.And&&o.every(function(n){return n})||t===v.Fn.Or&&o.some(function(n){return n})},b=function(n,t,e,l){var a=t.filter(function(n){return n.type===s.kH.ConditionalLogic}),d=t.filter(function(n){return n.payload.isHidden}).map(function(n){return n.uuid});if(0===a.length&&0===d.length)return n;var c=(0,i._)(n),p=!0,y=!1,h=void 0;try{for(var m,g=a[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var b=m.value.payload,N=b.logicalOperator,x=b.conditionals,T=b.actions;if(k(x,N,e,t)){var S=!0,O=!1,E=void 0;try{for(var A,C=T[Symbol.iterator]();!(S=(A=C.next()).done);S=!0)!function(){var n,t,e,r,l=A.value;l.type===v.Us.ShowBlocks&&(null===(n=l.payload)||void 0===n?void 0:n.showBlocks)&&(d=d.filter(function(n){var t,e;return(null===(e=l.payload)||void 0===e?void 0:null===(t=e.showBlocks)||void 0===t?void 0:t.includes(n))===!1})),l.type===v.Us.HideBlocks&&(null===(t=l.payload)||void 0===t?void 0:t.hideBlocks)&&(d=(0,i._)(d).concat((0,i._)(null===(r=l.payload)||void 0===r?void 0:r.hideBlocks))),l.type===v.Us.RequireAnswer&&(null===(e=l.payload)||void 0===e?void 0:e.requireAnswer)&&(c=c.map(function(n){var t,e;return(null===(e=l.payload)||void 0===e?void 0:null===(t=e.requireAnswer)||void 0===t?void 0:t.includes(n.groupUuid))?(0,u._)((0,o._)({},n),{payload:(0,u._)((0,o._)({},n.payload),{isRequired:!0})}):n}))}()}catch(n){O=!0,E=n}finally{try{S||null==C.return||C.return()}finally{if(O)throw E}}}}}catch(n){y=!0,h=n}finally{try{p||null==g.return||g.return()}finally{if(y)throw h}}if(d.length>0){c=c.filter(function(n){return!1===d.includes(n.uuid)});var U=[];if(t.forEach(function(n){var t=n.uuid,a=n.type,p=n.groupUuid,v=n.groupType,y=n.payload;if(!(!1===d.includes(t)||f.TI.includes(a))){if(f.FW.includes(v)&&U.push(p),void 0!==e[p]&&!(y.hasDefaultAnswer&&void 0!==y.defaultAnswer)&&!f.W_.includes(a)){if(a===s.kH.Checkbox||a===s.kH.RankingOption||a===s.kH.MultiSelectOption){if(Array.isArray(e[p])&&e[p].includes(t)){var h=(0,i._)(e[p]);h.splice(h.indexOf(t),1),null==l||l((0,r._)({},p,h))}}else if([s.kH.DropdownOption,s.kH.MultipleChoiceOption].includes(a)){if(Array.isArray(e[p])&&e[p].includes(t)){var m=(0,i._)(e[p]);m.splice(m.indexOf(t),1),null==l||l((0,r._)({},p,m))}else e[p]===t&&(null==l||l((0,r._)({},p,void 0)))}else a!==s.kH.Payment&&(null==l||l((0,r._)({},p,void 0)))}if(a===s.kH.MatrixRow&&void 0!==e[p]&&e[p][t]&&(null==l||l((0,r._)({},p,(0,u._)((0,o._)({},e[p]),(0,r._)({},t,void 0))))),a===s.kH.MatrixColumn&&void 0!==e[p]){var g=Object.keys(e[p]);if(g.length>0){var k=(0,o._)({},e[p]),b=!1;g.forEach(function(n){k[n]&&k[n].includes(t)&&(k[n].splice(k[n].indexOf(t),1),b=!0)}),b&&(null==l||l((0,r._)({},p,k)))}}(a===s.kH.MatrixRow||a===s.kH.MatrixColumn)&&c.filter(function(n){return n.groupUuid===p&&n.type!==s.kH.Matrix}).every(function(n){return!0===n.payload.isHidden})&&(c=c.filter(function(n){return n.groupUuid!==p}))}}),U.length>0){var B=new Map;c=c.map(function(n){if(U.includes(n.groupUuid)&&(n.type===s.kH.Dropdown||n.type===s.kH.MultiSelect))return(0,u._)((0,o._)({},n),{payload:(0,u._)((0,o._)({},n.payload),{options:n.payload.options.filter(function(n){var t=n.value;return!1===d.includes(t)})})});if(U.includes(n.groupUuid)&&[s.kH.MultipleChoiceOption,s.kH.Checkbox,s.kH.RankingOption].includes(n.type)){B.get(n.groupUuid)||B.set(n.groupUuid,{firstBlockUuid:c.find(function(t){return t.groupUuid===n.groupUuid}).uuid,lastBlockUuid:(0,i._)(c).reverse().find(function(t){return t.groupUuid===n.groupUuid}).uuid});var t=B.get(n.groupUuid),e=t.firstBlockUuid,r=t.lastBlockUuid;return(0,u._)((0,o._)({},n),{payload:(0,u._)((0,o._)({},n.payload),{isFirst:e===n.uuid,isLast:r===n.uuid})})}return n}).filter(function(n){return!((n.type===s.kH.Dropdown||n.type===s.kH.MultiSelect)&&0===n.payload.options.length)})}}return c},N=function(n,t,e,r,o){var u=n+1,i=t.filter(function(n){return n.type===s.kH.ConditionalLogic});if(0===i.length)return u&&u<=e?u:null;var l=!0,a=!1,d=void 0;try{for(var c,f=i[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=c.value.payload,h=p.logicalOperator,m=p.conditionals,g=p.actions;if(k(m,h,o,r)){var b=!0,N=!1,x=void 0;try{for(var T,S=g[Symbol.iterator]();!(b=(T=S.next()).done);b=!0){var O,E,A,C,U=T.value;U.type===v.Us.JumpToPage&&void 0!==(null===(O=U.payload)||void 0===O?void 0:O.jumpToPage)&&(u=(null===(A=U.payload)||void 0===A?void 0:null===(E=A.jumpToPage)||void 0===E?void 0:E.toString())==="0"?null:"number"==typeof(null===(C=U.payload)||void 0===C?void 0:C.jumpToPage)?U.payload.jumpToPage:(0,y.J0)(U.payload.jumpToPage,r))}}catch(n){N=!0,x=n}finally{try{b||null==S.return||S.return()}finally{if(N)throw x}}}}}catch(n){a=!0,d=n}finally{try{l||null==f.return||f.return()}finally{if(a)throw d}}return u&&u<=e?u:null},x=function(n,t,e){for(var r=[1],o=t.length,u=1;null!==u;){var i,l=u,a=t[l-1];if(u=N(l,a,o,n,e),l===u){u=null;continue}if(null!==u){if(r.includes(u)){u=null;continue}var d=(0,y.O2)(u,n);null!=d&&null!==(i=d.payload)&&void 0!==i&&i.isThankYouPage||r.push(u)}}return r},T=function(n,t,e){var r=n===t;if(!1===r&&"string"==typeof n&&"string"==typeof t&&!1===(0,m.K)(n)&&!0===(0,m.K)(t)){var o,u=e.find(function(n){return n.uuid===t});(null==u?void 0:null===(o=u.payload)||void 0===o?void 0:o.isOtherOption)&&(r=!0)}return r}},69020:function(n,t,e){e.d(t,{Bz:function(){return k},CX:function(){return T},Du:function(){return h},F2:function(){return g},cd:function(){return b},dZ:function(){return N},jW:function(){return m},nf:function(){return y},xB:function(){return x}});var r=e(91309),o=e(8773),u=e(11242),i=e(4290),l=e(55301),a=e(45889),d=e(18277),c=e(20114),f=e(96381),s=e(77782),p=e(63734),v=e(97900),y=function(n){var t=[];return n&&n.forEach&&0!==n.length&&n.forEach(function(n){if(n.nodeType===Node.TEXT_NODE&&n.textContent)t.push([(0,p.oJ)(n.textContent)]);else if(n.nodeType===Node.ELEMENT_NODE&&(n.childNodes.length>0||"BR"===n.nodeName)){var e,r,o,u,i,l=[];switch(n.nodeName){case"B":l.push(["font-weight","bold"]);break;case"U":l.push(["text-decoration","underline"]);break;case"I":l.push(["font-style","italic"]);break;case"A":var a=n.href;((null==a?void 0:a.match(/^http(s)?:\/\//))||(null==a?void 0:a.match(/^mailto:/))||(null==a?void 0:a.match(/^tel:/))||(null==a?void 0:a.match(/^sms:/)))&&l.push(["href",a]);break;case"FONT":var d=n.color;(null==d?void 0:d.match(/#[0-9a-fA-F]{3,6}/))&&l.push(["color",d]);break;case"DIV":l.push(["tag","div"]);break;case"P":l.push(["tag","p"]);break;case"BR":l.push(["tag","br"]);break;case"SPAN":l.push(["tag","span"])}var c=n.style;if(((null==c?void 0:null===(e=c.color)||void 0===e?void 0:e.match(/#[0-9a-fA-F]{3,6}/))||(null==c?void 0:null===(r=c.color)||void 0===r?void 0:r.match(/rgb\([0-9]{1,3}, [0-9]{1,3}, [0-9]{1,3}\)/))||(null==c?void 0:c.color)==="inherit")&&l.push(["color",c.color]),((null==c?void 0:null===(o=c.backgroundColor)||void 0===o?void 0:o.match(/#[0-9a-fA-F]{3,6}/))||(null==c?void 0:null===(u=c.backgroundColor)||void 0===u?void 0:u.match(/rgb\([0-9]{1,3}, [0-9]{1,3}, [0-9]{1,3}\)/))||(null==c?void 0:c.backgroundColor)==="inherit")&&l.push(["background-color",c.backgroundColor]),null==c?void 0:c.fontWeight){var f=null==c?void 0:c.fontWeight;["bolder","lighter"].includes(f)&&(f="bold"),l.push(["font-weight",f])}(null==c?void 0:c.fontStyle)&&l.push(["font-style",c.fontStyle]),(null==c?void 0:c.textDecoration)&&l.push(["text-decoration",c.textDecoration]),(null==c?void 0:c.display)&&l.push(["display",c.display]),"SPAN"===n.nodeName&&(null===(i=n.className)||void 0===i?void 0:i.indexOf("mention"))!==-1&&l.push(["mention",n.dataset.uuid]),l.length>0&&(1===n.childNodes.length&&n.childNodes[0].nodeType===Node.TEXT_NODE&&n.childNodes[0].textContent?t.push([(0,p.oJ)(n.childNodes[0].textContent),l]):"BR"===n.nodeName?t.push(["",l]):t.push([y(n.childNodes),l]))}}),t},h=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e="";return n.forEach(function(n){var o=(0,r._)(n,2),u=o[0],i=o[1];if("string"==typeof u&&!i){e+=(0,p.Vt)(u);return}if(i&&i.length>0){var l="span",a=[],d=[];i.forEach(function(n){var e=(0,r._)(n,2),o=e[0],i=e[1];"tag"===o&&"div"===i?l="div":"tag"===o&&"p"===i?l="p":"tag"===o&&"br"===i?(l="br",u=""):"href"===o?(l="a",d.push('href="'.concat(i,'"')),d.push('target="_blank"'),d.push('rel="noreferrer"')):"mention"===o?(d.push('class="mention"'),d.push('contenteditable="false"'),d.push('data-uuid="'.concat(i,'"')),t&&(u="")):a.push("".concat(o,": ").concat(i,";"))}),a.length>0&&d.push('style="'.concat(a.join(" "),'"')),"br"===l?e+="<br>":e+="<".concat(l," ").concat(d.join(" "),">").concat("string"==typeof u?u:h(u,t),"</").concat(l,">")}}),e},m=function(n){var t=document.createElement("div");return t.innerHTML=n,h(y(t.childNodes))},g=function(n,t,e,r){if("undefined"==typeof document)return"";var o=h(n.safeHTMLSchema);o=o.replace(/\u200B/g,"");var d=document.createElement("div");d.innerHTML=o;var c=!0,p=!1,y=void 0;try{for(var m,g=n.mentions[Symbol.iterator]();!(c=(m=g.next()).done);c=!0)!function(){var n,o,c=m.value,p=c.uuid,v=c.field,y=c.defaultValue,h=d.querySelectorAll('[data-uuid="'.concat(p,'"]'));if(0!==h.length){var g=v.uuid,k=v.type,b=v.questionType,N=v.blockGroupUuid,x=v.calculatedFieldType,T="";k===l.f.Metadata?T=r[g]:k===l.f.InputField&&b&&N?T=b===u.kH.InputDate?null!==(n=e[N])&&void 0!==n?n:"":(0,f.Ee)(b,e[N],t):[l.f.CalculatedField,l.f.HiddenField].includes(k)&&g&&N&&(T=e[N]?e[N][g]:""),k===l.f.CalculatedField&&x===i.o.Number&&"number"==typeof T&&(T=(0,s.AK)(T,2)),v.questionType===u.kH.Matrix&&(T=(null!==(o=e[v.blockGroupUuid][v.uuid])&&void 0!==o?o:[]).map(function(n){return(0,a.u)(n,t)}).join(",")),(d.textContent.startsWith("http")||d.textContent.startsWith("www."))&&!("string"==typeof T&&-1!==T.indexOf("/"))&&(T=encodeURIComponent(T)),h.forEach(function(n){n.innerHTML=(null==T?void 0:T.toString())||y||""})}}()}catch(n){p=!0,y=n}finally{try{c||null==g.return||g.return()}finally{if(p)throw y}}return(0,v.A9)(d.textContent,!0)},k=function(n){return!(n&&Array.isArray(null==n?void 0:n.safeHTMLSchema))||0===(0,p.Vt)(h(n.safeHTMLSchema)).length},b=function(){var n=document.createElement("div");return n.innerHTML="Tally Forms",{safeHTMLSchema:y(n.childNodes),mentions:[]}},N=function(n){var t=S("Form name",(0,c.VN)(n,{includeMetadata:!0}).find(function(n){return"formName"===n.uuid})),e=t.mentionObj,r=t.mentionHtml,o=document.createElement("div");return o.innerHTML="New Tally Form Submission for ".concat(r),{safeHTMLSchema:y(o.childNodes),mentions:[e]}},x=function(n){var t=[],e=(0,c.VN)(n),r="",o=!0,u=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done);o=!0){var d=l.value,f=S(d.title,d),s=f.mentionObj,p=f.mentionHtml;r+="<div><b>".concat(d.title,"</b></div><div>").concat(p,"</div><br/>"),t.push(s)}}catch(n){u=!0,i=n}finally{try{o||null==a.return||a.return()}finally{if(u)throw i}}var v=document.createElement("div");return v.innerHTML=r,{safeHTMLSchema:y(v.childNodes),mentions:t}},T=function(n){var t=[],e="",r=S("Form name",(0,c.VN)(n,{includeMetadata:!0}).find(function(n){return"formName"===n.uuid})),o=r.mentionObj,u=r.mentionHtml;e+="<div>New submission for *".concat(u,"*.</div><br/>"),t.push(o);var i=!0,l=!1,a=void 0;try{for(var d,f=(0,c.VN)(n)[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var s=d.value,p=S(s.title,s),v=p.mentionObj,h=p.mentionHtml;e+="<div>*".concat(s.title,"*: ").concat(h,"</div>"),t.push(v)}}catch(n){l=!0,a=n}finally{try{i||null==f.return||f.return()}finally{if(l)throw a}}var m=document.createElement("div");return m.innerHTML=e,{safeHTMLSchema:y(m.childNodes),mentions:t}},S=function(n,t){var e=(0,o.Z)();return{mentionObj:{uuid:e,field:t},mentionHtml:'<span class="mention" contenteditable="false" data-uuid="'.concat(e,'">@').concat(n,"</span>").concat((0,d.G6)()?"​":"")}}}}]);
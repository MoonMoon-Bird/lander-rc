"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3815,2923],{43815:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var r,o,i=t(85893),u=t(98817),l=t(72253),c=t(14932),a=t(91309),s=t(4586),d=t(67294),f=t(13882),h=t(77058),v=t(51568),g=t(18277),p=t(22923),y=t(73412),S=t(42714),C=t(63156),m=t(89498),M=t(19521),N=t(19596),b=M.ZP.div.withConfig({componentId:"sc-22a1bcde-0"})(["position:absolute;top:0;padding:0 6px;display:flex;align-items:center;justify-content:flex-end;height:100%;cursor:pointer;border:0;border-radius:5px;"," "," > svg{"," pointer-events:none;color:",";}> div{font-size:13px;color:",";}@media (hover:hover){&:hover{> div{color:",";}}}"],function(e){var n=e.theme;return(0,N.vA)("right","0",n.direction)},function(e){return"rtl"===e.theme.direction&&"flex-direction: row-reverse;"},function(e){var n=e.theme;return(0,N.vA)("margin-left","6px",n.direction)},function(e){return e.theme.color.textGrayscale3},function(e){return e.theme.color.textGrayscale2},function(e){return e.theme.color.textGrayscale1}),k=M.ZP.div.withConfig({componentId:"sc-22a1bcde-1"})(["position:relative;direction:ltr;.tally-context-menu{width:100%;max-height:400px;}"," ",""],function(e){var n=e.theme;return!1===e.hasCountryCode&&"\n    input {\n      ".concat((0,N.vA)("padding-right","82px",n.direction),";\n      ").concat("rtl"===n.direction&&"text-align: right;",";\n    }\n\n    ").concat(b," {\n      background-color: ").concat(n.color.inputBackground,";\n    }\n  ")},function(e){var n=e.hasCountryCode,t=e.theme;return!0===n&&"\n    input {\n      ".concat((0,N.vA)("padding-right","50px",t.direction),";\n      ").concat("rtl"===t.direction&&"text-align: right;",";\n    }\n  ")}),x=M.ZP.div.withConfig({componentId:"sc-22a1bcde-2"})(["position:absolute;top:0;pointer-events:none;background-color:transparent;display:flex;align-items:center;width:100%;height:100%;padding:0 ",";color:",";span:nth-child(1){color:transparent;}span:nth-child(2){font-size:19px;}",""],function(e){return e.theme.spacing.sm},function(e){return e.theme.color.inputPlaceholder},function(e){return"rtl"===e.theme.direction&&"display: none;"}),A=M.ZP.div.withConfig({componentId:"sc-22a1bcde-3"})(["color:",";padding-left:",";"],function(e){return e.theme.color.textGrayscale2},function(e){return e.theme.spacing.sm});(r=o||(o={})).Manual="MANUAL",r.Auto="AUTO";var G=function(e){var n,t=e.defaultValue,r=e.defaultCountryCode,o=e.inputProps,M=e.onChange,N=(0,h.$)().t,G=(0,d.useRef)(null),w=(0,a._)((0,d.useState)(null!=t?t:""),2),O=w[0],T=w[1],B=(0,a._)((0,d.useState)(t?(0,p.formatPhoneNumber)(t):""),2),I=B[0],P=B[1],R=(0,a._)((0,d.useState)(null!=r?r:null),2),E=R[0],U=R[1],j=(0,a._)((0,d.useState)({showMask:!1,showSelectButton:!!t,selectTrigger:null}),2),Y=j[0],D=j[1],L=(0,d.useRef)(!0),Z=(0,d.useRef)(!0),_=(0,d.useRef)(""),F=(0,d.useRef)(!1),K=(0,d.useRef)(null),Q=function(){var e=(null==o?void 0:o.id)?(0,S.US)(o.id,t,r):null;if(e)return U(e),e;if(!t)return U(null!=r?r:null),null!=r?r:null;var n=(0,y.$I)(t);return U(n),n},V=(0,d.useMemo)(function(){var e=[],n=JSON.parse(N("json.countries"));for(var t in y.YQ)e.push({code:t,country:n[t],callingCode:y.YQ[t]});return e.sort(function(e,n){return e.country.localeCompare(n.country)})},[]),W=function(e){if(""===e||"+"===e)return[];var n=V.filter(function(n){return n.callingCode.startsWith(e)}).sort(function(e,n){return e.callingCode>n.callingCode?1:-1});return(0,y.aP)(n,e)},J=function(e){if(""===e||"+"===e)return[];var n=(0,y.OY)(O);if(0===n.length)return[];var t=V.filter(function(e){return n.includes(e.code)}).sort(function(e,n){return e.callingCode>n.callingCode?1:-1});return(0,y.aP)(t,e)},H=(0,d.useMemo)(function(){var e=[],n=[],t=[],r=W(O);if(n=r,0===r.length||"MANUAL"===Y.selectTrigger){var o=[];0===r.length&&(o=J(O)),n=(0,s._)(r).concat((0,s._)(o)),t=V.filter(function(e){return!(0,s._)(r.map(function(e){return e.code})).concat((0,s._)(o.map(function(e){return e.code}))).includes(e.code)})}return n.length>0&&e.push({options:n}),t.length>0&&e.push({options:t}),e},[O,Y]),q=function(e){return e&&y.YQ[e]?y.YQ[e]:"+"},z=function(e){0!==Object.keys(e).length&&D((0,l._)({},Y,e))},X=function(e,n,t){if(F.current=!1,""!==e&&!1===e.startsWith("+")&&e.length>1){if(E){var r,i=y.YQ[E];i&&(e=e.startsWith(i.substring(1))?"+".concat(e):"".concat(null!==(r=y.YQ[E])&&void 0!==r?r:"").concat(e))}else F.current=!0}/[٠-٩]/.test(e)&&(e=e.replace(/[٠-٩]/g,function(e){return"٠١٢٣٤٥٦٧٨٩".indexOf(e).toString()}));var u=(0,y.$I)(e);u?!n&&u?(U(u),n=u):n&&u&&n!==u&&y.YQ[n]!==y.YQ[u]?(U(u),n=u):n!==E&&U(n):(U(null),n=null);var l=(0,p.formatPhoneNumber)(e,n);if(t){var c=t.selectionStart||0,a=null;e!==l&&e.length!==c&&(0===c?a=1:e.slice(0,c)===l.slice(0,c)?a="Delete"===_.current&&isNaN(parseFloat(l.charAt(c)))?c+1:c:e.charAt(c-1)!==l.charAt(c-1)&&(isNaN(parseFloat(_.current))?a=c:isNaN(parseFloat(l.charAt(c-1)))&&(a=c+1))),null!==a&&window.requestAnimationFrame(function(){t.selectionStart=a,t.selectionEnd=a})}e=(0,p.getPhoneNumber)(l),P(l),T(e),M(e),(null==o?void 0:o.id)&&(0,S.R1)(o.id,e,n);var s=W(e);!et&&n&&s.length>1&&(ei(!0),z({selectTrigger:"AUTO"})),et&&"AUTO"===Y.selectTrigger&&(!n||0===s.length)&&ei(!1)},$=function(e){var n;y.YQ[e]&&(F.current?(X("".concat(y.YQ[e]).concat(O.replace("+","")),e),F.current=!1):E&&y.YQ[E]&&O.length>y.YQ[e].length?X(O.replace(y.YQ[E],y.YQ[e]),e):!E&&O.length>y.YQ[e].length?X("".concat(y.YQ[e]).concat(O.replace("+","")),e):X(y.YQ[e],e),ei(!1),null===(n=G.current)||void 0===n||n.focus())};(0,d.useEffect)(function(){var e=null;L.current&&(L.current=!1,e=Q(),t&&e&&z({showSelectButton:!0})),t!==O&&(T(null!=t?t:""),P(t?(0,p.formatPhoneNumber)(t):""),e=Q()),t&&e&&!Y.showSelectButton&&z({showSelectButton:!0})},[t]);var ee=(n=[]).concat.apply(n,(0,s._)(H.map(function(e){return e.options}))),en=(0,C.X)({optionsSize:ee.length-1,onSelection:function(e){$(ee[e].code)}}),et=en.isSelectOpen,er=en.onKeyDown,eo=en.selectedIndex,ei=en.toggleSelectionMenu;return(0,d.useEffect)(function(){if(null!==eo){var e;(0,g.Ol)(null===(e=K.current)||void 0===e?void 0:e.parentElement,ee[eo].code)}},[eo]),(0,i.jsxs)(k,{hasCountryCode:!!E,children:[(0,i.jsx)(u.Z,(0,c._)((0,l._)({},o),{ref:G,type:"tel",value:I,onFocus:function(){var e=null;Z.current&&(Z.current=!1,e=Q()),et||(Y.showMask||z({showMask:!0,showSelectButton:!0}),""===I&&setTimeout(function(){return P(q(null!=e?e:E))},10))},onBlur:function(){if(!et){var e={};Y.showMask&&(e.showMask=!1),("+"===I||I===q(E))&&(P(""),""!==O&&(T(""),M("")),e.showSelectButton=!1),z(e)}},onKeyDown:er,onChange:function(e){return X(e.target.value,E,e.target)}})),Y.showMask&&(0,i.jsxs)(x,{children:[(0,i.jsx)("span",{children:I}),(0,i.jsx)("span",{children:(0,p.getRemainingMaskForPhoneNumber)(I,E)})]}),Y.showSelectButton&&(0,i.jsxs)(b,{onMouseDown:function(e){return e.preventDefault()},onClick:function(){ei(!0),z({selectTrigger:"MANUAL"})},children:[E?(0,i.jsx)(f.Z,{country:E,size:16}):(0,i.jsx)("div",{children:N("label.country")}),(0,i.jsx)(v.Z,{size:16})]}),et&&(0,i.jsx)(m.ZP,{position:{top:40,left:0,bottom:40,right:0},width:"auto",onClose:function(){var e;ei(!1),null===(e=G.current)||void 0===e||e.focus()},children:(0,i.jsx)(m.aV,{ref:K,withSectionDivider:!0,children:H.map(function(e,n){var t=e.options;return(0,i.jsx)(m.$0,{children:t.map(function(e){var n=e.code,t=e.callingCode,r=e.country,o=["list-item"];return null!==eo&&n===ee[eo].code&&o.push("selected"),(0,i.jsx)(m.ck,{id:n,className:o.join(" "),label:r,actionContent:(0,i.jsx)(A,{children:t}),onClick:function(){return $(n)}},n)})},"group_".concat(n))})})})]})},w=t(20253),O=t(56469),T=function(e){var n,t,r=e.value,o=void 0===r?"":r,l=e.placeholder,c=void 0===l?"":l,a=e.isRequired,s=e.internationalFormat,d=e.defaultCountryCode,f=e.error,h=e.question,v=e.language,g=e.onChange,p=e.renderRequiredIndicator,y=f?"error_".concat(null==h?void 0:h.blockGroupUuid):void 0;return s?(0,i.jsx)(O.W,{children:(0,i.jsxs)(O.V,{children:[(0,i.jsx)(G,{defaultValue:o,defaultCountryCode:d,language:v,inputProps:{id:null==h?void 0:h.blockGroupUuid,placeholder:c,required:a,"aria-label":null!==(t=null==h?void 0:h.title)&&void 0!==t?t:void 0,"aria-required":a?"true":"false","aria-invalid":f?"true":"false","aria-describedby":y},onChange:function(e){return g&&g(e)}}),p&&p(),f&&(0,i.jsx)(w.Z,{id:y,error:f})]})}):(0,i.jsx)(O.W,{children:(0,i.jsxs)(O.V,{children:[(0,i.jsx)(u.Z,{id:null==h?void 0:h.blockGroupUuid,type:"tel",value:o,placeholder:c,required:a,"aria-label":null!==(n=null==h?void 0:h.title)&&void 0!==n?n:void 0,"aria-required":a?"true":"false","aria-invalid":f?"true":"false","aria-describedby":y,onChange:function(e){return g&&g(e.target.value)}}),p&&p(),f&&(0,i.jsx)(w.Z,{id:y,error:f})]})})}},63156:function(e,n,t){t.d(n,{X:function(){return u}});var r=t(72253),o=t(91309),i=t(67294),u=function(e){var n=e.optionsSize,t=e.onSelection,u=(0,i.useRef)(""),l=(0,o._)((0,i.useState)({isSelectOpen:!1,selectedIndex:null}),2),c=l[0],a=l[1],s=c.isSelectOpen,d=c.selectedIndex,f=function(){null!==d&&(t(d),h({isSelectOpen:!1}))},h=function(e){0!==Object.keys(e).length&&(void 0===e.isSelectOpen||e.isSelectOpen||(e.selectedIndex=null),a((0,r._)({},c,e)))};return{toggleSelectionMenu:function(e){h({isSelectOpen:e})},onKeyDown:function(e){if(u.current=e.key,s&&"Tab"===e.key){h({isSelectOpen:!1});return}if(s)switch(e.key){case"ArrowDown":case"ArrowUp":e.preventDefault();var t=null!=d?d:-1;"ArrowDown"===e.key?++t>n&&(t=0):"ArrowUp"===e.key&&--t<0&&(t=n),h({selectedIndex:t});break;case"Enter":e.preventDefault(),f();break;case" ":d&&(e.preventDefault(),f());break;case"Backspace":case"Delete":d&&h({selectedIndex:null})}},isSelectOpen:s,selectedIndex:d}}},51568:function(e,n,t){t.d(n,{Z:function(){return r}});var r=(0,t(64370).Z)("ChevronDown",[["polyline",{points:"6 9 12 15 18 9",key:"1do0m2"}]])},22923:function(e,n,t){t.r(n),t.d(n,{formatPhoneNumber:function(){return l},getMaskForPhoneNumber:function(){return i},getPhoneNumber:function(){return c},getRemainingMaskForPhoneNumber:function(){return u},isPhoneNumberValid:function(){return a}});var r=t(4387),o=t(73412),i=function(e,n){var t=(e.length<3?"+## ### ## ## ##":"+### ## ### ###").replace(/#/g,"_");if(n||(n=(0,o.$I)(e)),n)try{var i=(0,r.SR)(e,{regionCode:n}).type;i&&"unknown"!==i||(i="mobile"),t=(0,r.W7)(n,i).number.international.replace(/[0-9]/g,"_")}catch(e){}return n?t:"+###".replace(/#/g,"_")},u=function(e,n){return i(e,n).substring(e.length)},l=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=i(e,n),r=e.replace(/[^0-9]/g,""),o="",u=0,l=0;l<t.length;l++)if("_"===t[l]){if(o+=r[u]||"",++u>=r.length)break}else o+=t[l];return u<r.length&&(o+=r.substring(u)),o},c=function(e){var n=e.replace(/[^0-9]/g,"");if(0===n.length)return"";var t="+".concat(n),i=(0,o.$I)(e);if(!i)return t;try{var u,l,c=(0,r.SR)(e,{regionCode:i});return null!==(l=null===(u=c.number)||void 0===u?void 0:u.e164)&&void 0!==l?l:t}catch(e){return t}},a=function(e){if(0===e.replace(/[^0-9]/g,"").length)return!1;var n=(0,o.OY)(e);if(0===n.length)return!1;var t=!1;try{var i=!0,u=!1,l=void 0;try{for(var c,a=n[Symbol.iterator]();!(i=(c=a.next()).done);i=!0){var s=c.value;if((0,r.SR)(e,{regionCode:s}).valid){t=!0;break}}}catch(e){u=!0,l=e}finally{try{i||null==a.return||a.return()}finally{if(u)throw l}}}catch(e){}return t}},42714:function(e,n,t){t.d(n,{LI:function(){return l},R1:function(){return i},US:function(){return u}});var r=t(17415),o="PHONE_NUMBER_INPUT",i=function(e,n,t){try{var i={},u=(0,r.wf)(o);u&&(i=JSON.parse(u)),i.keys||(i.keys={}),i.lastCountryCode=t||i.lastCountryCode||null,n||t?i.keys[e]={value:n,countryCode:t}:delete i.keys[e],localStorage.setItem(o,JSON.stringify(i))}catch(e){}},u=function(e,n,t){try{var i={},u=(0,r.wf)(o);if(u){if(i=JSON.parse(u),!n&&!t&&i.lastCountryCode)return i.lastCountryCode;if(i.keys&&i.keys[e]&&n===i.keys[e].value&&i.keys[e].countryCode)return i.keys[e].countryCode}}catch(e){}return null},l=function(e){try{var n=(0,r.wf)(o);if(!n)return;var t=JSON.parse(n);if(!t.keys)return;var i=!1,u=!0,l=!1,c=void 0;try{for(var a,s=e[Symbol.iterator]();!(u=(a=s.next()).done);u=!0){var d=a.value;t.keys[d]&&(delete t.keys[d],i=!0)}}catch(e){l=!0,c=e}finally{try{u||null==s.return||s.return()}finally{if(l)throw c}}0===Object.keys(t.keys).length&&(delete t.keys,i=!0),i&&localStorage.setItem(o,JSON.stringify(t))}catch(e){}}},13882:function(e,n,t){var r=t(67294),o=["AD","AE","AF","AG","AI","AL","AM","AO","AR","AS","AT","AU","AW","AX","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LGBT","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","XK","YE","YT","ZA","ZM","ZW","EU","GB-ENG","GB-NIR","GB-SCT","GB-WLS","GB-ZET","US-CA"];n.Z=function(e){var n=e.country,t=void 0===n?"US":n,i=e.role,u=e.size,l=void 0===u?24:u,c=e.alt,a=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n.indexOf(t=i[r])>=0||(o[t]=e[t]);return o}(e,["country","role","size","alt"]);if(t){var s=t.toUpperCase();return void 0!==o.find(function(e){return e===t})?r.createElement("img",Object.assign({src:"https://cdn.jsdelivr.net/gh/madebybowtie/FlagKit@2.2/Assets/SVG/"+s+".svg",role:void 0===i?"img":i,alt:null!=c?c:s+" Flag",height:l,width:l},a)):r.createElement("span",null,s)}return null}}}]);
function isSP(){return!!navigator.userAgent.match(/(iPhone|iPad|Android)/)}function jsDispSuccessMsg(t){msgs=JSON.parse(t);var e=new Modal;e.init(),e.renderNotification(msgs)}function jsDispErrMsg(t){msgs=JSON.parse(t);var e=new Modal;e.init(),e.renderError(msgs)}function getHeaderHeight(){return $("#main-header").height()}function getAnchorOffset(t){return $(t).length?$(t).offset().top-getHeaderHeight():0}function convertSingleChar(t){var e=t.replace(/[ａ-ｚＡ-Ｚ０-９＠－]/g,(function(t){return String.fromCharCode(t.charCodeAt(0)-65248)}));return e=e.replace("ー","-")}function getFormValues(t){for(var e=$('input[type="text"], select ,textarea',t),n=e.length,o=[],r=0;r<n;r++)o.push(e.eq(r).val());return o}function isEmptyArr(t){for(var e=t.length,n=0;n<e;n++)if(""!==t[n])return 0;return 1}function removeSecondsFromDate(t){return t.slice(0,-3)}function replaceHyphenToSlash(t){return t.replace(/-/g,"/")}function replaceLineFeed(t){return t.replace(/\n/g,"<br>")}function escapeHTML(t){return t&&$.each({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},(function(e,n){reg=new RegExp(e,"g"),t=t.replace(reg,n)})),t}function getUrl(){return"//"+window.location.host+window.location.pathname}function getUrlQueries(){var t,e=location.search.slice(1),n=e.split("&"),o={};return e&&$.each(n,(function(e,n){(n=(n=n.replace(/={2,}/g,"=")).replace(/\+{2,}/g,"+")).match(/=/)&&""!==(t=n.split("="))[0]&&""!==t[1]&&(o[t[0]]=t[1].replace(/^\++|\++$/g,""))})),o}function buildUrlQuery(t){var e="";return $.each(t,(function(t,n){e+=t+"="+n+"&"})),e.slice(0,-1)}function animateScroll(t,e){e=0===e?0:1e3,$("html, body").stop().animate({scrollTop:t},e,"easeOutQuart")}function getNowTime(){var t=new Date,e=t.getHours(),n=t.getMinutes(),o=t.getSeconds();return(e=("0"+e).slice(-2))+":"+(n=("0"+n).slice(-2))+":"+(o=("0"+o).slice(-2))}function getSinceFoundation(){var t=(new Date).getFullYear();return parseInt(t)-2004}function GetJsonp(){this.send_params={type:"GET",dataType:"jsonp",jsonCallback:"callback",error:function(t,e,n){console.log(t.responseText.replace(/<[^>]+?>/g,""))}},this.run=function(){$.ajax(this.send_params)}}function AttentionStocks(){this.url="//asunaro-app.sakura.ne.jp/portfolio/api/attention-stocks.php",this.send_data={limit:10,type:"report"},this.$target=$("#attention-stocks-body"),this.descriptions_suffix="で紹介された銘柄の中で、本日高値騰落率を上方更新した注目銘柄一覧です。",this.descriptions={report:"本日高値騰落率を上方更新した注目銘柄一覧です。",oishi:"「社長の二言目」「大石のちょっとひと休み」"+this.descriptions_suffix,nakaya:"「中屋の5時に霧中」「中屋の明日への布石」「動意株まとめ」"+this.descriptions_suffix,kato:"「加藤のちょっとひと休み」「元外資系金融マンのこぼれ話」「加藤あきらの投資戦略室」"+this.descriptions_suffix,tetsu:"「相場師徹兜の鉄株」"+this.descriptions_suffix,kyohei:"「大文字恭平の相場勘所」"+this.descriptions_suffix}}function News(){this.url="//asunaro-app.sakura.ne.jp/apps/news/api/post.php",isSP()?this.$target=$("#news-area"):this.$target=$(".main-contents")}function DiaStocks(){this.url="//asunaro-app.sakura.ne.jp/apps/diamond_stocks/api/post.php",this.$target=$("#diamond_stocks")}function NewsTicker(){this.init(),this.getContentsWidth()}function Paging(){}function Modal(){}function Confirm(){Modal.apply(this,arguments),this.$dfd=$.Deferred()}function FormValidation(){this.rs={flg:0,msg:[]},this.pattern={require:/^\S+/,kana:/^[ァ-ヶー゛゜ 　]*$/,mail:/^(?:[^\@]+?@[A-Za-z0-9_\.\-]+\.+[A-Za-z\.\-\_]+)*$/,phone:/^\d{2,4}-?\d{2,4}-?\d{3,4}$/,zip1:/^\d{3}$/,zip2:/^\d{4}$/}}function Loading(){this.init()}function convertSearchWord(t){return t=(t=encodeURIComponent(t.trim())).replace(/(%20|%E3%80%80)+/g,"+")}function deleteConditionQuery(t){return delete t.words,delete t.page,delete t.year,delete t.month,delete t.date,t}GetJsonp.prototype.setUrl=function(t){this.send_params.url=t},GetJsonp.prototype.setData=function(t){this.send_params.data=t},AttentionStocks.prototype.fetchData=function(){var t=new GetJsonp;t.setUrl(this.url),t.setData(this.send_data),t.send_params.success=function(t){t.stocks.length?this.render(t):this.renderOffHour()}.bind(this),t.run()},AttentionStocks.prototype.render=function(t){var e,n,o,r,a,i,s,d,l,c,p,h,u=t.stocks,f=removeSecondsFromDate(replaceHyphenToSlash(t.updated));e=$("<p>").addClass("description").text(this.getDescription()),n=$("<p>").addClass("updated").text("更新日："+f),o=$("<ul>").addClass("attention-stocks-items"),$.each(u,(function(t,e){r=$("<li>").addClass("item"),h=location.href.match(/\/user\//)?"/user/ranking":"/ranking",a=$("<a>").attr("href",h+"?type=attention").text("("+e.stock_code+")"+e.stock_name),i=$("<p>").addClass("stock-name").html(a),s=$("<p>").text("配信日："+e.recommend_date),d=$("<p>").text("配信時株価："+e.recommend_value+"円"),l=$("<p>").text("配信後最高値："+e.max_value+"円"),c=$("<p>").text("配信後最安値："+e.min_value+"円"),(p=$("<p>")).append($("<b>").addClass("important").text("最高値騰落率【+"+e.max_ratio+"%↑】")),r.append(i,s,d,l,c,p),o.append(r)})),this.$target.prepend(e[0].outerHTML+n[0].outerHTML+o[0].outerHTML)},AttentionStocks.prototype.renderOffHour=function(){var t=$("<p>").addClass("off-hour-msg").text("このコンテンツは平日の10時以降に表示されます。");this.$target.prepend(t)},AttentionStocks.prototype.setLimit=function(t){this.send_data.limit=t},AttentionStocks.prototype.setType=function(t){this.send_data.type=t},AttentionStocks.prototype.getDescription=function(){return this.descriptions[this.send_data.type]},News.prototype.fetchData=function(){var t=new GetJsonp;t.setUrl(this.url),t.send_params.success=function(t){t.length&&this.render(t)}.bind(this),t.run()},News.prototype.render=function(t){var e,n,o,r,a,i,s;e=$("<section>").addClass("news"),n=$("<h3>").addClass("section-title").text("最新ニュース"),o=$("<div>").addClass("section-body"),r=$("<ul>").addClass("news-items"),$.each(t,(function(t,e){a=$("<li>"),e.url||"1"===e.popup_flag?(i=$("<a>").attr("href",e.url.replace(/http:|https:/,"")),"1"===e.popup_flag&&i.addClass("login-guidance")):i=$("<div>"),i.addClass("text-group"),s=$("<p>").addClass("text").text(e.text),i.html(s),a.html(i),r.append(a)})),o.html(r),e.append(n,o),this.$target.prepend(e)},DiaStocks.prototype.fetchData=function(){var t=new GetJsonp;t.setUrl(this.url),t.send_params.success=function(t){t.length&&this.render(t)}.bind(this),t.run()},DiaStocks.prototype.render=function(t){var e,n,o,r,a;$.each(t,(function(t,i){n=$("<span>").addClass("icon icon-free"),o=$("<br>"),e=$("<li>"),r=i.title,a=i.text,e.append(n,r,o,a),$("#diamond_stocks").append(e)}))},NewsTicker.prototype.init=function(){this.w_wrap=$(".news").outerWidth(),this.$target=$(".news-contents-body")},NewsTicker.prototype.getContentsWidth=function(){var t=$(".news .title").outerWidth(),e=this.$target.outerWidth();this.w_target=t+e},NewsTicker.prototype.action=function(){this.w_wrap<this.w_target?this.$target.addClass("scroll"):this.$target.addClass("show")},Paging.prototype.render=function(t,e,n,o,r){var a,i,s,d=r||7;t=parseInt(t,10),e=parseInt(e,10),n=parseInt(n,10),a=Math.ceil(t/n),(s=(i=e-Math.floor(d/2)>=0?e-Math.floor(d/2):0)>=1?e+Math.floor(d/2)+1:d)>a&&(s=a,i=a-d>0?a-d:0),this.disp(d,e,i,s,a,o)},Paging.prototype.disp=function(t,e,n,o,r,a){var i,s,d,l;for(i=$("<ul>").addClass("paging"),n>=1&&(s=$("<li>"),d=$("<a>").attr("href","1").text("最初"),i.append(s.append(d))),l=n;l<o;l++)s=$("<li>"),d=$("<a>").attr("href",l+1).text(l+1),l===e&&d.addClass("current"),i.append(s.append(d));r-e>t/2&&(s=$("<li>"),d=$("<a>").attr("href",r).text("最後"),i.append(s.append(d))),a.after(i)},Modal.prototype.init=function(){var t="modal-header",e="modal-body",n="modal-controls",o=$("<div>").addClass(t),r=$("<div>").addClass(e),a=$("<div>").addClass(n);this.$self=$(".modal"),this.$overlay=$(".overlay"),this.$self.html(o[0].outerHTML+r[0].outerHTML+a[0].outerHTML),this.$header=$("."+t),this.$body=$("."+e),this.$controls=$("."+n)},Modal.prototype.disp=function(){$([this.$self[0],this.$overlay[0]]).addClass("show"),$(".main-nav").removeClass("open")},Modal.prototype.close=function(){$(".modal, .overlay").removeClass("show"),$(".overlay .close").remove()},Modal.prototype.setTitle=function(t){$title=t?$("<p>").addClass("modal-title").text(t):"",this.$header.html($title)},Modal.prototype.setBody=function(t){this.$body.html(t)},Modal.prototype.addAgreeBtn=function(){var t=$("<button>").addClass("btn btn-modal btn-modal-agree").text("OK");this.$controls.html(t)},Modal.prototype.addCancelBtn=function(){var t=$("<button>").addClass("btn btn-modal btn-modal-cancel").text("キャンセル");this.$controls.prepend(t)},Modal.prototype.addLoginGuidanceBtn=function(){var t=$("<button>").addClass("btn btn-modal btn-modal-login").text("ログイン"),e=$("<button>").addClass("btn btn-modal btn-modal-regist").text("無料登録");this.$controls.html(t[0].outerHTML+e[0].outerHTML),$(".btn-modal-login").on("click touchend",(function(t){window.location.href="/login"})),$(".btn-modal-regist").on("click touchend",(function(t){window.location.href="/regist"}))},Modal.prototype.addCloseBtn=function(){var t=$("<button>").addClass("close");this.$overlay.html(t)},Modal.prototype.renderNotification=function(t,e){var n="";$.each(t,(function(t,e){n+="<p>"+e+"</p>"})),e&&this.setTitle(e),this.setBody(n),this.addAgreeBtn(),this.addCloseBtn(),this.disp()},Modal.prototype.renderError=function(t){var e="";$.each(t,(function(t,n){e+="<p>"+n+"</p>"})),this.setTitle("エラー"),this.setBody(e),this.addAgreeBtn(),this.disp()},Modal.prototype.renderConfirm=function(t,e){this.setTitle("確認"),this.setBody(t),this.addAgreeBtn(),this.addCancelBtn(),this.disp();var n=$.Deferred();return $(document).on("click touchend",".btn-modal-agree",(function(t){if(void 0!==e.content_id){$.post("/ajax/confirmSsUpdate",{ss:e.ss},(function(t){t&&(location.href="/user/content_page/"+e.content_id),n.resolve()}))}})),$(document).on("click touchend",".btn-modal-cancel",(function(){n.resolve()})),n.promise()},Modal.prototype.renderLoginGuidance=function(){this.setBody("このコンテンツは会員登録後にご利用可能です。<br>既にご登録済みの会員様はログインボタンよりログインしてください。"),this.addCloseBtn(),this.addLoginGuidanceBtn(),this.disp()},Confirm.prototype=Object.create(Modal.prototype),Confirm.prototype.renderUsePoint=function(t,e){var n="このコンテンツを閲覧するには"+t+"pt消費します<br>【保有ポイント："+e+"pt】",o=this;return this.setBody(n),this.addAgreeBtn(),this.addCancelBtn(),this.disp(),$(document).on("click touchend",".btn-modal-agree",(function(){o.$dfd.resolve()})).on("click touchend",".btn-modal-cancel",(function(){o.$dfd.reject()})),this.$dfd.promise()},Confirm.prototype.renderPointShortage=function(){this.setBody("このコンテンツを閲覧するためのポイントが不足しています"),this.addPointBtn(),this.addCancelBtn(),this.disp()},Confirm.prototype.addPointBtn=function(){var t=$("<a>").attr("href","/user/point#about-point").addClass("btn btn-modal btn-modal-agree").text("ポイント追加");this.$controls.html(t)},FormValidation.prototype.validate=function(t){for(var e=t.find("input, select, textarea"),n=e.length,o=0;o<n;o++){var r=e.eq(o),a=r.data("name");if(r.hasClass("chkrequire")&&!r.val().match(this.pattern.require)&&this.rs.msg.push(a+"を入力してください"),(r.hasClass("chkemail")&&r.val()&&!r.val().match(this.pattern.mail)||r.hasClass("chkphone")&&r.val()&&!r.val().match(this.pattern.phone))&&this.rs.msg.push(a+"の形式が不正です"),r.hasClass("chkkana")&&!r.val().match(this.pattern.kana)&&this.rs.msg.push(a+"はカタカナで入力してください"),r.hasClass("chkselect")&&""===r.val()&&this.rs.msg.push(a+"を選択してください"),r.hasClass("chkconfirm")){var i=e.eq(o-1);r.val()!==i.val()&&this.rs.msg.push(i.data("name")+"と"+a+"が一致しません")}if(r.hasClass("chkcheckbox")&&!1===r.prop("checked")&&this.rs.msg.push(a+"にチェックを入れてください"),r.hasClass("chklength")&&r.data("max")){var s=parseInt(r.data("max"));r.val().length>s&&this.rs.msg.push(a+"は"+s+"文字以内で入力してください")}if(r.hasClass("chkall")){a=r.data("all-name");var d=r.data("all-key"),l=t.find('[data-all-key="'+d+'"]').map(((t,e)=>$(e).val())).toArray();console.log(l),l.some((t=>t))&&(l.every((t=>t))||this.rs.msg.push(a+"を設定する場合はすべて入力してください"))}r.hasClass("chkzip1")&&r.val()&&!r.val().match(this.pattern.zip1)&&this.rs.msg.push(a+"は数字3桁で入力してください"),r.hasClass("chkzip2")&&r.val()&&!r.val().match(this.pattern.zip2)&&this.rs.msg.push(a+"は数字4桁で入力してください")}return this.rs.msg.length&&(this.rs.flg=1),this.rs},Loading.prototype.init=function(){this.$self=$(".loading"),this.$overlay=$(".overlay"),this.$self.html("<span></span><span></span><span></span>")},Loading.prototype.disp=function(){$([this.$self[0],this.$overlay[0]]).addClass("show")},Loading.prototype.close=function(){$([this.$self[0],this.$overlay[0]]).removeClass("show")},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),$((function(){var t,e,n;$(document).on("click",".login-guidance",(function(){var t=new Modal;return t.init(),t.renderLoginGuidance(),!1})),$(document).on("click touchend",".overlay .close, .modal .btn",(function(t){(new Modal).close(),$(".agreement-documents").removeClass("show")})),$(document).on("touchstart touchend",".modal, .overlay .close, .modal .btn",(function(t){t.preventDefault(),t.stopPropagation()})),function(){if($("#main-header").length){var t=$("#main-header").offset().top;$(window).scroll((function(){$(window).scrollTop()>=t?headerFixed():headerRelative()}))}}(),function(){var t=window.location.hash;if(t){var e=getAnchorOffset(t);setTimeout((function(){animateScroll(e,0)}),500)}}(),$('a[href*="#"]').click((function(){var t;if("public-info"!==(t=this.href.split("#")[1])&&(""===t||$("#"+t).length))return animateScroll(getAnchorOffset("#"+t)),!1})),$(document).on("submit",".form-validation",(function(){var t=(new FormValidation).validate($(this));if(t.flg){var e=new Modal;return e.init(),e.renderError(t.msg),!1}})),$(".singlebyte-char").blur((function(){var t=convertSingleChar($(this).val());$(this).val(t)})),$(".contents.pmail .sample-items li").click((function(){var t=$(this).index(),e=new Modal;e.init(),e.renderNotification([{body1:"■プレミアムメール■<br><br>1/20 8：45<br><br>●●●様<br><br>おはようございます。<br>NYダウが12月上旬水準まで押し戻される展開に。<br>急落ではないものの頭が重い動きに<br>イベントを見極めようと大多数が様子見をしているか。<br>為替も含めて一方向に走りにくい展開なので<br>値動きが軽そうなものをチョイスし、<br>短期売買に徹すること。<br><br>◇アピックヤマダ（6300）<br>もうひと伸びの期待。<br>高寄りなら見送りを。<br><br>◇ラオックス（8202）<br>昨日高寄り大陰線も本日半値戻し<br>程度を期待。<br>目標は750円あたり。<br><br>◆ストライク（6196）<br>1/19<br>スウィング妙味あるが<br>イベントリスク考え利が乗ったら確定を。<br>目標は5100円付近。<br><br>◆フォスター電機（6794）<br>1/19<br>まだ小動き。様子見で。<br><br>◆ミマキエンジアニアリング（6638）<br>1/18<br>まずは700円到達。<br>710円あたりもう一伸び期待。<br><br>◇＝新規銘柄<br>◆＝過去記載済み銘柄",body2:"■プレミアムメール■<br><br>1/20 12：45<br><br>●●●様<br><br>本日後場は週末に加え、<br>トランプ大統領就任式が控えており、ポジション整理中心か。<br>新規建ては前場のトレードで終わらせてこちらも建玉整理を。<br>前場推奨のアピックヤマダをしっかり利食って<br>休むも相場でよいリフレッシュを。<br><br>◆アピックヤマダ（6300）<br>1/20<br>17％超上昇。<br>欲張らず本日中の利食いを。<br><br>◆ラオックス（8202）<br>1/20<br>寄り付き直後に動意も<br>ワンチャンスのみ。<br>利食えてない場合は同値撤退で。<br>◆ストライク（6196）<br>1/19<br>ギャップアップで仕込み成功。<br>イベントリスク考え利が乗ったら確定を。<br>目標は5100円付近。<br><br>◆フォスター電機（6794）<br>1/19<br>5日MAに抑えられ反落。<br>本格的な反発はもう少し後か。<br>撤退で。<br><br>◆ミマキエンジアニアリング（6638）<br>1/18<br>まずは700円到達。<br>710円あたりもう一伸び期待。<br><br>◇＝新規銘柄<br>◆＝過去記載済み銘柄"}["body"+(t+1)]],"◆◇◆【あすなろプレミアム】◆◇◆")})),$("#report-search-global").click((function(){var t,e,n=$('[name="report_search_global"]').val();if(n)return e=(getUrl().match(/user/)?"/user/asunaro_report":"/asunaro_report")+"?words="+convertSearchWord(n),window.location.href=e,!1;(t=new Modal).init(),t.renderError(["検索ワードを入力してください"])})),$(document).keydown((function(t){13===t.keyCode&&$('[name="report_search_global"]:focus').length>0&&$("#report-search-global").click()})),function(){if($(".logined-index").length){var t,e,n,o=parseInt($("#have-point").text(),10);$(".public-info li").click((function(){if(t=$("a",this).attr("href"),e=parseInt($(".point-value",this).text(),10),$(".read-status",this).hasClass("unread")?1:0){if((n=new Confirm).init(),!isNaN(e)&&e<o)return n.renderUsePoint(e,o).done((function(){window.location.href=t})),!1;if(!isNaN(e)&&e>o)return n.renderPointShortage(),!1}}))}}(),function(){if($(".contents.member-info").length){var t=$("#mail2"),e=$(".value",t),n=$(".btn",t);e.text()||(e.text("未登録"),n.text("登録"))}}(),$("#purchase-btn").click((function(){$form=$(this).closest("form");var t=(new FormValidation).validate($form);if(t.flg){var e=new Modal;e.init(),e.renderError(t.msg)}else $(this).prop("disabled",!0),$(this).val("処理中..."),$form.submit();return!1})),t=["ようこそ","こんにちは","こんばんは"],e=$(".greet .msg"),(n=getNowTime())>="00:00:00"&&n<="10:59:59"?e.text(t[0]):n>="11:00:00"&&n<="16:59:59"?e.text(t[1]):e.text(t[2]),function(){var t=$(".fixed-area"),e=$(window).height();$(window).scroll((function(){var n=$(this).scrollTop(),o=$(document).height();n>=500?n+e>=o-300?t.removeClass("show"):t.addClass("show"):t.removeClass("show")}))}(),$(".contents.about").length&&$(".since-foundation").text(getSinceFoundation()),$("#regist-comp-btn").click((function(){var t=$(this).attr("href");return $("#auto-login-apploved").prop("checked")?location.href=t:location.href="/login",!1})),$(document.body).on("contextmenu copy",(function(){return!1})),$("img").attr("draggable","false"),$("img").css("-webkit-touch-callout","none"),$(document).on("dragstart",(function(t){t.preventDefault()}))}));